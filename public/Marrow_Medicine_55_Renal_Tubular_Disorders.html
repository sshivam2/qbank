<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>55_Renal Tubular Disorders - Marrow Medicine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .medical-quiz {
            font-family: Segoe UI, Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .question-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .option-card {
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .option-card:hover {
            border-color: #3b82f6;
            transform: translateY(-2px);
        }
        
        .option-card.selected {
            background: #3b82f6;
            color: white;
            border-color: #1d4ed8;
        }
        
        .option-card.correct {
            background: #10b981;
            color: white;
            border-color: #059669;
        }
        
        .option-card.incorrect {
            background: #ef4444;
            color: white;
            border-color: #dc2626;
        }
        
        .progress-bar {
            background: linear-gradient(to right, #10b981, #059669);
            transition: width 0.3s;
        }
        
        .medical-image {
            max-width: 100%;
            max-height: 400px;
            height: auto;
            border-radius: 12px;
            margin: 20px auto;
            display: block;
        }
        
        .hidden {
            display: none !important;
        }

        .explanation-content {
            font-family: Segoe UI, Tahoma, Geneva, Verdana, sans-serif;
            font-size: 1.05rem;
            line-height: 1.7;
            color: #374151;
            text-align: left;
        }
        
        .explanation-content p {
            margin-bottom: 1rem;
            text-align: justify;
        }
        
        .explanation-content strong, .explanation-content b {
            font-weight: 600;
            color: #1f2937;
        }
        
        .explanation-content img {
            max-width: 100%;
            height: auto;
            margin: 1.5rem auto;
            display: block;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>

<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen medical-quiz">
    <header class="bg-white shadow-xl p-6">
        <div class="container mx-auto flex justify-between items-center">
            <div>
                <h1 class="text-3xl font-bold text-gray-800">55_Renal Tubular Disorders</h1>
                <p class="text-gray-600 mt-2">Marrow ‚Ä¢ Medicine ‚Ä¢ Interactive Learning</p>
            </div>
            <div class="flex gap-2">
                <button class="bg-gray-500 text-white px-3 py-2 text-sm rounded-lg hover:bg-gray-600 transition" 
                        onclick="window.location.href='marrow_medicine.html'">
                    ‚Üê Topics
                </button>
                <button class="bg-purple-500 text-white px-3 py-2 text-sm rounded-lg hover:bg-purple-600 transition" 
                        onclick="window.location.href='marrow.html'">
                    üìö Marrow
                </button>
                <button class="bg-blue-500 text-white px-3 py-2 text-sm rounded-lg hover:bg-blue-600 transition" 
                        onclick="window.location.href='index.html'">
                    üè† Home
                </button>
            </div>
        </div>
    </header>

    <!-- Statistics Bar (Hidden in Test Mode) -->
    <div class="bg-white shadow-lg p-4" id="stats-bar">
        <div class="container mx-auto flex justify-center gap-8">
            <div class="text-center">
                <div class="text-2xl font-bold text-green-600" id="correct-stats">0</div>
                <div class="text-sm text-gray-600">Correct</div>
            </div>
            <div class="text-center">
                <div class="text-2xl font-bold text-red-600" id="incorrect-stats">0</div>
                <div class="text-sm text-gray-600">Incorrect</div>
            </div>
            <div class="text-center">
                <div class="text-2xl font-bold text-blue-600" id="accuracy-stats">0%</div>
                <div class="text-sm text-gray-600">Accuracy</div>
            </div>
            <div class="text-center">
                <div class="text-2xl font-bold text-purple-600" id="progress-stats">0/14</div>
                <div class="text-sm text-gray-600">Progress</div>
            </div>
        </div>
    </div>

    <!-- Quiz Section -->
    <section class="container mx-auto p-6" id="quiz-section">
        <div class="bg-white rounded-2xl shadow-xl p-8">
            <!-- Progress Bar -->
            <div class="w-full bg-gray-200 rounded-full h-4 mb-8">
                <div class="progress-bar h-4 rounded-full" id="progress-bar"></div>
            </div>

            <div class="flex justify-between items-center mb-8">
                <h2 class="text-2xl font-bold text-blue-700" id="question-number">Question 1 of 14</h2>
                <div class="text-sm text-gray-600" id="question-status">Click an option to answer</div>
            </div>

            <!-- Question Text -->
            <div class="mb-10">
                <div class="question-card text-white p-8 rounded-2xl mb-8" id="question-text"></div>
                
                <!-- Question Image -->
                <div class="text-center mb-8" id="question-images"></div>
                
                <!-- Options -->
                <div class="space-y-4" id="options"></div>
            </div>

            <!-- Answer Feedback Section (Normal Mode Only) -->
            <div class="hidden mb-8 p-6 rounded-2xl" id="feedback-section">
                <div class="text-center mb-4">
                    <div class="text-6xl mb-2" id="feedback-icon"></div>
                    <div class="text-2xl font-bold mb-2" id="feedback-message">Correct!</div>
                </div>
                
                <div class="grid md:grid-cols-2 gap-4 mb-4">
                    <div class="bg-white p-4 rounded-xl border">
                        <strong>Your Answer:</strong><br>
                        <span id="user-answer-display"></span>
                    </div>
                    <div class="bg-white p-4 rounded-xl border">
                        <strong>Correct Answer:</strong><br>
                        <span class="text-green-600" id="correct-answer-display"></span>
                    </div>
                </div>
                
                <div class="bg-blue-50 p-6 rounded-xl" id="explanation-section">
                    <strong class="text-lg text-blue-800">Explanation:</strong>
                    <div id="explanation-content" class="mt-3 explanation-content"></div>
                </div>
            </div>

            <!-- Navigation -->
            <div class="flex justify-between gap-4">
                <button class="bg-gray-400 text-white px-6 py-3 rounded-xl hover:bg-gray-500 transition" 
                        onclick="window.location.href='marrow_medicine.html'">
                    Back to Topics
                </button>
                
                <div class="flex gap-4">
                    <button class="bg-gray-400 text-white px-6 py-3 rounded-xl disabled" id="prev-btn">
                        Previous
                    </button>
                    <button class="bg-blue-500 text-white px-6 py-3 rounded-xl hidden" id="next-btn">
                        Next
                    </button>
                    <button class="bg-green-600 text-white px-6 py-3 rounded-xl font-bold hidden" id="finish-btn">
                        Finish Quiz
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Test Mode Final Results -->
    <section class="container mx-auto p-6 hidden" id="test-results">
        <div class="bg-white rounded-2xl shadow-xl p-8">
            <div class="text-center mb-8">
                <h2 class="text-4xl font-bold mb-4 text-blue-700">Test Complete! üéâ</h2>
                <div class="text-6xl mb-4" id="test-grade-icon">üéØ</div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-green-100 p-6 rounded-2xl text-center">
                    <div class="text-4xl font-bold text-green-600" id="test-final-correct">0</div>
                    <div class="font-semibold text-green-700">Correct Answers</div>
                </div>
                <div class="bg-red-100 p-6 rounded-2xl text-center">
                    <div class="text-4xl font-bold text-red-600" id="test-final-incorrect">0</div>
                    <div class="font-semibold text-red-700">Incorrect Answers</div>
                </div>
                <div class="bg-blue-100 p-6 rounded-2xl text-center">
                    <div class="text-4xl font-bold text-blue-600" id="test-final-accuracy">0%</div>
                    <div class="font-semibold text-blue-700">Final Accuracy</div>
                </div>
            </div>

            <!-- Detailed Review -->
            <div class="mb-8">
                <h3 class="text-2xl font-bold text-gray-800 mb-4">üìã Detailed Review</h3>
                <div id="test-review-details" class="space-y-4"></div>
            </div>
            
            <div class="flex justify-center gap-4">
                <button class="bg-purple-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-purple-700 transition" 
                        onclick="window.location.href='marrow_medicine.html'">
                    Back to Topics
                </button>
                <button class="bg-blue-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-blue-700 transition" 
                        onclick="window.location.reload()">
                    Retake Quiz
                </button>
            </div>
        </div>
    </section>

    <!-- Normal Mode Final Results -->
    <section class="container mx-auto p-6 hidden" id="final-results">
        <div class="bg-white rounded-2xl shadow-xl p-8">
            <div class="text-center mb-8">
                <h2 class="text-4xl font-bold mb-4 text-blue-700">Quiz Complete! üéâ</h2>
                <div class="text-6xl mb-4" id="final-grade-icon">üéØ</div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-green-100 p-6 rounded-2xl text-center">
                    <div class="text-4xl font-bold text-green-600" id="final-correct">0</div>
                    <div class="font-semibold text-green-700">Correct Answers</div>
                </div>
                <div class="bg-red-100 p-6 rounded-2xl text-center">
                    <div class="text-4xl font-bold text-red-600" id="final-incorrect">0</div>
                    <div class="font-semibold text-red-700">Incorrect Answers</div>
                </div>
                <div class="bg-blue-100 p-6 rounded-2xl text-center">
                    <div class="text-4xl font-bold text-blue-600" id="final-accuracy">0%</div>
                    <div class="font-semibold text-blue-700">Final Accuracy</div>
                </div>
            </div>
            
            <div class="flex justify-center gap-4">
                <button class="bg-purple-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-purple-700 transition" 
                        onclick="window.location.href='marrow_medicine.html'">
                    Back to Topics
                </button>
                <button class="bg-blue-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-blue-700 transition" 
                        onclick="window.location.reload()">
                    Retake Quiz
                </button>
            </div>
        </div>
    </section>

    <script>
        const questions = [
  {
    "id": 996,
    "text": "Q1. What acid-base disturbance is seen in patients with renal tubular acidosis?",
    "options": [
      {
        "label": "A",
        "text": "Normal anion gap hyperchloremic metabolic acidosis.",
        "correct": true
      },
      {
        "label": "B",
        "text": "High anion gap hyperchloremic metabolic acidosis",
        "correct": false
      },
      {
        "label": "C",
        "text": "Normal anion gap hypochloremic metabolic acidosis",
        "correct": false
      },
      {
        "label": "D",
        "text": "High anion gap hypochloremic metabolic acidosis.",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">In renal tubular acidosis (RTA), there is normal anion gap hyperchloremic metabolic acidosis. RTA refers to a group of disorders in which there is impaired tubular transport of H+ and/or HCO3despite relatively well-preserved renal function. There are 4 types: * Type I - impaired H+ secretion (distal), leading to decreased HCO3production * Type II - impaired HCO3reabsorption (proximal) * Type III - carbonic anhydrase deficiency causing defects in the transport of both H+ and HCO3(mixed) * Type IV - hypoaldosteronism (hyperkalemic) The overall deficiency of HCO3in all the types is compensated by Clsecretion. Hence, the serum anion gap remains normal.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "55_Renal Tubular Disorders",
    "deck_id": 1755954606353,
    "correctAnswer": "A. Normal anion gap hyperchloremic metabolic acidosis."
  },
  {
    "id": 997,
    "text": "Q2. What is the most common type of renal tubular acidosis?",
    "options": [
      {
        "label": "A",
        "text": "Type 1",
        "correct": false
      },
      {
        "label": "B",
        "text": "Type 2",
        "correct": false
      },
      {
        "label": "C",
        "text": "Type 3",
        "correct": false
      },
      {
        "label": "D",
        "text": "Type 4",
        "correct": true
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">The most common type of renal tubular acidosis (RTA) is the type 4 or hyperkalemic type.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "55_Renal Tubular Disorders",
    "deck_id": 1755954606353,
    "correctAnswer": "D. Type 4"
  },
  {
    "id": 998,
    "text": "Q3. Which of the following is incorrect about type 4 renal tubular acidosis?",
    "options": [
      {
        "label": "A",
        "text": "The most common cause is diabetes mellitus",
        "correct": true
      },
      {
        "label": "B",
        "text": "It can occurs in patients with interstitial renal diseases Cc) It is always congenital",
        "correct": false
      },
      {
        "label": "C",
        "text": "It is caused by hyporeninemic hypoaldosteronism",
        "correct": false
      },
      {
        "label": "D",
        "text": "",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Type 4 renal tubular acidosis can be a congenital or acquired disorder. 763 It is caused by conditions that result in hypoaldosteronism or hyporeninemic hypoaldosteronism including: * Diabetic nephropathy - most common ¬¢ Tubulointerstitial disease ¬´ Addison's disease * Obstructive uropathy * Drugs like NSAIDs, ACEI, ARBs can increase the risk * Psuedohypoaldosteronism type 1 (due to aldosterone resistance) * Psuedohypoaldosteronism type 2/ gordons syndrome (due to defects in Na-Cl cotransporter) * Congenital isolated hypoaldosteronism (due to enzyme deficiency)</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "55_Renal Tubular Disorders",
    "deck_id": 1755954606353,
    "correctAnswer": "A. The most common cause is diabetes mellitus"
  },
  {
    "id": 999,
    "text": "Q4. 52-year-old man presented with dizziness and infrequent urination. He was diagnosed with stage 4 chronic kidney disease last month. Investigations reveal metabolic acidosis and hyperkalemia. What is the likely diagnosis?",
    "options": [
      {
        "label": "A",
        "text": "Type 1 RTA",
        "correct": false
      },
      {
        "label": "B",
        "text": "Type 2 RTA 759",
        "correct": false
      },
      {
        "label": "C",
        "text": "Type 3 RTA",
        "correct": false
      },
      {
        "label": "D",
        "text": "Type 4 RTA",
        "correct": true
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Hyperkalemia is a characteristic feature of type 4 RTA or generalized distal RTA. It commonly occurs in patients with chronic kidney disease (CKD). In CKD patients, renal dysfunction results in hyperkalemia only when the GFR is severely impaired (stage 5). Hyperkalemia in the earlier stages of CKD is suggestive of type 4 RTA. In CKD, volume overload leads to low levels of renin and, hence, aldosterone. This leads to Na+ loss and K+ retention in the distal tubule. The resultant hyperkalemia causes impaired NH3 synthesis in the proximal tubule. Hence, H+ cannot be excreted as NH4+ ions. Retained H+ ions lead to reduced HCO3production and acidosis.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "55_Renal Tubular Disorders",
    "deck_id": 1755954606353,
    "correctAnswer": "D. Type 4 RTA"
  },
  {
    "id": 1000,
    "text": "Q5. Which of the following would not be seen in patients with type 1 renal tubular acidosis?",
    "options": [
      {
        "label": "A",
        "text": "Reduced NHI! excretion",
        "correct": false
      },
      {
        "label": "B",
        "text": "Serum potassium &amp;lt; 3.5 mEq/L",
        "correct": false
      },
      {
        "label": "C",
        "text": "Urinary pH is &amp;lt; 5.5 after acid loading",
        "correct": true
      },
      {
        "label": "D",
        "text": "Increased bone resorption",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Urinary pH will be &amp;gt; 5. 5 after acid loading in RTA type 1. In this condition, there is a defect in H+ secretion by the distal tubules. Hence, there is a failure of urine acidification. H+ combines with NH3 to form NHMIM and thus in RTA type 1, NH4+ excretion is reduced. In the acid loading test, acidosis is induced by the administration of NH4Cl (releases H+). In normal individuals, this results in increased excretion of H+, leading to acidic urine (pH &amp;lt; 5. 5). However, this fails to occur in RTA type 1. Impaired secretion of H+ leads to potassium wasting and hypokalemia (via the H+/K+ATPase antiporter). The resulting metabolic acidosis causes bone demineralization and resorption.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "55_Renal Tubular Disorders",
    "deck_id": 1755954606353,
    "correctAnswer": "C. Urinary pH is &amp;lt; 5.5 after acid loading"
  },
  {
    "id": 1001,
    "text": "Q6. 6-month-old infant is being evaluated for failure to thrive. Lab investigations are as follows. Hypokalemia is found to improve following alkalinization therapy. What type of renal stones is this infant at a higher risk of developing?",
    "options": [
      {
        "label": "A",
        "text": "Uric acid",
        "correct": false
      },
      {
        "label": "B",
        "text": "Citrate",
        "correct": false
      },
      {
        "label": "C",
        "text": "Cystine",
        "correct": false
      },
      {
        "label": "D",
        "text": "Calcium phosphate",
        "correct": true
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">This clinical scenario is suggestive of type 1 RTA. In this condition, calcium phosphate and oxalate stones are formed in the distal convoluting tubules (DCT). 764 In this condition, there is a defect in H+ secretion by the distal tubules. This leads to: * Normal anion gap metabolic acidosis * Urinary pH &amp;gt; 5. 5 * Hypokalemia * Impaired H+ secretion causes K+ wasting * It improves following alkalinization therapy with NaHCO3 Acidemia leads to hypercalcemia and then hypercalciuria. There is also hypocitraturia as acidemia induces increased cell citrate utilization. Normally, citrate in the urine binds to calcium and increases its solubility. In the absence of citrate in the urine, calcium begins to precipitate. This leads to nephrocalcinosis and calcium phosphate and oxalate stones.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "55_Renal Tubular Disorders",
    "deck_id": 1755954606353,
    "correctAnswer": "D. Calcium phosphate"
  },
  {
    "id": 1002,
    "text": "Q7. Which of the following would you not expect in a patient with Lowe&apos;s syndrome?",
    "options": [
      {
        "label": "A",
        "text": "Glaucoma",
        "correct": false
      },
      {
        "label": "B",
        "text": "Cataract",
        "correct": false
      },
      {
        "label": "C",
        "text": "Hypertonia",
        "correct": true
      },
      {
        "label": "D",
        "text": "Intellectual disability",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Hypertonia is not a feature of Lowe's syndrome or oculo-cerebro-renal syndrome. The following clinical features are seen in this condition: * Hypotonia * Cataract * Glaucoma * Intellectual disability * Renal tubular acidosis (RTA) type 2</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "55_Renal Tubular Disorders",
    "deck_id": 1755954606353,
    "correctAnswer": "C. Hypertonia"
  },
  {
    "id": 1003,
    "text": "Q8. Which of the following is unlikely to be seen in patients with Dent&apos;s disease?",
    "options": [
      {
        "label": "A",
        "text": "X-linked inheritance 760",
        "correct": false
      },
      {
        "label": "B",
        "text": "Inactivating mutation of chloride channel",
        "correct": false
      },
      {
        "label": "C",
        "text": "Recurrent kidney stones",
        "correct": false
      },
      {
        "label": "D",
        "text": "Distal renal tubular defect",
        "correct": true
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Dent's disease is an inherited cause of type 2 RTA. A proximal renal tubular defect is seen in this condition, not a distal tubular defect. It is an X-linked recessive condition. It is caused by inactivating mutations in CLCN5, a chloride transporter expressed in endosomes of the proximal tubule. The resulting dysfunction of the proximal convoluted tubule and failure of reabsorption of substances leads to: ¬¢ Hypercalciuria * Hypophosphatemia * Recurrent kidney stones</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "55_Renal Tubular Disorders",
    "deck_id": 1755954606353,
    "correctAnswer": "D. Distal renal tubular defect"
  },
  {
    "id": 1004,
    "text": "Q9. Patients with which of the following are not at risk of developing type 2 renal tubular acidosis?",
    "options": [
      {
        "label": "A",
        "text": "Wilson&apos;s disease",
        "correct": false
      },
      {
        "label": "B",
        "text": "Galactosemia",
        "correct": false
      },
      {
        "label": "C",
        "text": "Hereditary fructose intolerance",
        "correct": false
      },
      {
        "label": "D",
        "text": "Medullary sponge kidney",
        "correct": true
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Medullary sponge kidney is a cause of RTA type 1, not type 2. The causes of RTA type 2 include: 765 * Amyloidosis * Wilson's disease * Galactosemia * Hereditary fructose intolerance * Cystinosis * Lowe syndrome * Drugs - tenofovir, acetazolamide, topiramate The causes of RTA type 1 include: * Familial defects ¬¢ Autoimmune conditions - SLE, Sjogren syndrome * Drugs - amphotericin, lithium, aminoglycosides, ifosfamide * Medullary sponge kidney</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "55_Renal Tubular Disorders",
    "deck_id": 1755954606353,
    "correctAnswer": "D. Medullary sponge kidney"
  },
  {
    "id": 1005,
    "text": "Q10. Which of the following is incorrect about renal tubular acidosis type 2?",
    "options": [
      {
        "label": "A",
        "text": "It is associated with hypophosphatemia",
        "correct": false
      },
      {
        "label": "B",
        "text": "It can be caused by Lowe&apos;s syndrome",
        "correct": false
      },
      {
        "label": "C",
        "text": "Renal stones may occur in patients",
        "correct": true
      },
      {
        "label": "D",
        "text": "Minimum urinary pH is &amp;lt; 5.5",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Renal stones are not a feature of type 2 or proximal RTA. This is because high levels of citrate in the urine bind with calcium and prevent stone formation. In this condition, the cells of the proximal convoluted tubule (PCT) fail to reabsorb HCO3-. In the initial stages, this HCO3loss leads to a urine pH &amp;gt; 5. 5. However, as the body's HCO3stores are depleted, the urinary pH falls to &amp;lt; 5. 5 as the secretion of H+ in the DCT remains intact. Hence, the minimum urinary pH is &amp;lt; 5. 5. It can be caused by Lowe's syndrome but a majority of type 2 RTA cases are associated with Fanconi's syndrome. This syndrome is characterized by a generalized defect of reabsorption of various substances at the PCT. This leads to loss of HCO3-, glucose, amino acids, phosphate, citrate, and calcium in the urine. Loss of phosphate leads to vitamin-D resistant hypophosphatemic rickets /osteomalacia. Note: An exception is Dent's disease, a genetic cause of RTA type 2 in which renal stones are present.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "55_Renal Tubular Disorders",
    "deck_id": 1755954606353,
    "correctAnswer": "C. Renal stones may occur in patients"
  },
  {
    "id": 1006,
    "text": "Q11. 14-month-old baby was brought with complaints of refusal to walk after a minor fall while playing. Imaging revealed a left tibial fracture along with generalized sclerosis and a bone-in-bone appearance. Additionally, his developmental milestones were found to be delayed. Investigations are as follows. What is the likely renal tubular defect present in this patient?",
    "options": [
      {
        "label": "A",
        "text": "Type 1 RTA",
        "correct": false
      },
      {
        "label": "B",
        "text": "Type 2 RTA",
        "correct": false
      },
      {
        "label": "C",
        "text": "Type 3 RTA",
        "correct": true
      },
      {
        "label": "D",
        "text": "Type 4 RTA",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Pathological fractures and a bone-in-bone appearance point towards a diagnosis of osteopetrosis. The lab values are significant for hypokalemia with normal anion gap metabolic acidosis. These findings are suggestive of renal tubular acidosis (RTA) type 3. Type 3 or mixed RTA is a rare condition that usually occurs in neonates and infants. It is due to an autosomal recessive, inherited carbonic anhydrase-2 (CA-2) deficiency. This results in features of both distal and proximal RTA with: ¬¢ Failure to reabsorb HCO3 at PCT 766 * Failure to excrete H+ at DCT This results in the following findings: * Normal anion gap metabolic acidosis * Hypokalemia * Urinary pH &amp;gt; 5. 5 * Positive urine anion gap As CA-2 is widely expressed, mutations of this gene result in a condition called marble brain disease or Guibaud-Vainsel syndrome. It presents with multiple clinical findings including: * Cerebral calcifications * Mental retardation * Mixed RTA (Type 3 RTA) * Osteopetrosis</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "55_Renal Tubular Disorders",
    "deck_id": 1755954606353,
    "correctAnswer": "C. Type 3 RTA"
  },
  {
    "id": 1007,
    "text": "Q12. 761",
    "options": [
      {
        "label": "A",
        "text": "30-year-old man is being evaluated for high blood pressure noted on multiple occasions. Investigations reveal metabolic alkalosis, suppressed renin levels, and high urine chloride levels. What is the likely cause? Bartter syndrome",
        "correct": false
      },
      {
        "label": "B",
        "text": "Liddle syndrome",
        "correct": true
      },
      {
        "label": "C",
        "text": "Gitelman syndrome",
        "correct": false
      },
      {
        "label": "D",
        "text": "Fanconi syndrome",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">The clinical scenario with hypertension and metabolic alkalosis is suggestive of Liddle's syndrome. It is an autosomal dominant condition due to a gain of function mutation in the ENaC gene. This gene codes for the epithelial sodium channels present in the kidney. This leads to increased sodium retention and results in a state of pseudo-hyperaldosteronism. The following findings are seen: * Hypertension * Hypokalemic metabolic alkalosis * Normal-low aldosterone * Low renin Treatment is with diuretics that directly block the ENaC channels, like amiloride and triamterene. Spironolactone is not effective as it is an aldosterone-receptor antagonist.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "55_Renal Tubular Disorders",
    "deck_id": 1755954606353,
    "correctAnswer": "B. Liddle syndrome"
  },
  {
    "id": 1008,
    "text": "Q13. young patient presented with polyuria and polydipsia. His BP is 130/80 mm Hg. Laboratory parameters revealed serum K+ of 3. 2 mmol/L, blood pH of 7. 46, and hypomagnesemia. Urinary calcium was elevated. He is not on any medications. This condition is likely due to a defect in which of the following?",
    "options": [
      {
        "label": "A",
        "text": "Proximal tubule",
        "correct": false
      },
      {
        "label": "B",
        "text": "Distal convoluted tubules",
        "correct": false
      },
      {
        "label": "C",
        "text": "Ascending loop of Henle",
        "correct": true
      },
      {
        "label": "D",
        "text": "Epithelial sodium channels",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">This clinical scenario is suggestive of Bartter syndrome. It occurs due to a defect in the Na+/K+/Clchannel in the thick ascending loop of Henle. A defect in the Na+/K+/Clchannel impairs the transport functions of the thick ascending loop of Henle. It results in the following features: * Polyuria and polydipsia * Natriuresis with high aldosterone (due to RAAS activation) 767 * Hypokalemia * Metabolic alkalosis * Hypomagnesemia * Hypocalcemia and hypercalciuria The clinical features of this condition are similar to the effects of loop diuretics. These drugs also act on the Na+/K+/Clchannel. Hence, response to loop diuretics may be blunted. Treatment is with potassium-sparing diuretics like spironolactone and amiloride. NSAID's like indomethacin are second line drugs however they can reduce renal function. Option A: Defect in the proximal tubule results in Fanconi's syndrome. These patients have acidosis, with glycosuria, generalized aminoaciduria, and phosphaturia. Option B: Defect in the Na+/Clcotransporter in distal convoluted tubule (DCT) results in Gitelman syndrome. These patients also present with hypokalemic alkalosis and hypomagnesemia. However, they also develop, hypocalciuria, and chondrocalcinosis. Option D: Increased activation of the epithelial sodium channels (ENaC) channels results in Liddle syndrome. This causes increased reabsorption of Na+ exchanged for K+ causing hypokalemia. Increased Na absorption leads to hypertension.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "55_Renal Tubular Disorders",
    "deck_id": 1755954606353,
    "correctAnswer": "C. Ascending loop of Henle"
  },
  {
    "id": 1009,
    "text": "Q14. 17-year-old boy is being evaluated for fatigue and muscle weakness for 3 months. On examination, Chvostek&apos;s sign is positive and BP is 90/60 mm Hg. Investigations show hypokalemia and hypercalcemia with metabolic alkalosis. What is the likely diagnosis?",
    "options": [
      {
        "label": "A",
        "text": "Bartter syndrome",
        "correct": false
      },
      {
        "label": "B",
        "text": "Gitelman syndrome",
        "correct": true
      },
      {
        "label": "C",
        "text": "Liddle syndrome",
        "correct": false
      },
      {
        "label": "D",
        "text": "Fanconi&apos;s syndrome a 762",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Chvostek's sign (spasm of facial muscles on tapping the facial nerve) indicates tetany. In this patient with hypercalcemia, it is likely due to hypomagnesemia. These clinical features are suggestive of Gitelman syndrome. This condition occurs due to a mutation of Na+/Clcotransporter in the distal collecting tubule (DCT). The resulting impairment of the tubular transport leads to the following features: * Mild natriuresis with normal-low BP * Increased renin and aldosterone * Hypokalemia * Metabolic alkalosis ¬¢ Hypercalcemia and hypocalciuria * Hypomagnesemia The clinical features of this condition are similar to the effects of thiazide diuretics. These drugs also act on the Na+/Clcotransporter. Hence, response to thiazide diuretics may be blunted. Treatment is with potassium-sparing diuretics like spironolactone and amiloride. Option A: Bartter syndrome affects the Na+/K+/Clchannels. It causes hypocalcemia and hypercalciuria. Option C: Liddle syndrome causes increased activation of ENaC channels. It results in hypokalemia and hypertension. Option D: Fanconi's syndrome occurs due to a defect in proximal tubular function. It results in metabolic acidosis. 768 769</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "55_Renal Tubular Disorders",
    "deck_id": 1755954606353,
    "correctAnswer": "B. Gitelman syndrome"
  }
];
        let currentQuestion = 0;
        let answers = [];
        let correctCount = 0;
        let incorrectCount = 0;
        let answeredQuestions = new Set();
        let isTestMode = localStorage.getItem('testMode') === 'true' || false;

        console.log('Quiz loaded with', questions.length, 'questions');
        console.log('Test mode:', isTestMode);

        // Hide stats bar if test mode is enabled
        if (isTestMode) {
            document.addEventListener('DOMContentLoaded', () => {
                document.getElementById('stats-bar').style.display = 'none';
            });
        }

        // Auto-start quiz
        startQuiz();

        function startQuiz() {
            answers = new Array(questions.length).fill(null);
            correctCount = 0;
            incorrectCount = 0;
            answeredQuestions = new Set();
            currentQuestion = 0;
            showQuestion(0);
            updateStats();
        }

        function showQuestion(index) {
            currentQuestion = index;
            const question = questions[index];

            document.getElementById('question-number').textContent = `Question ${index + 1} of ${questions.length}`;
            document.getElementById('question-text').innerHTML = question.text;
            document.getElementById('question-status').textContent = answers[index] ? 'Question answered' : 'Click an option to answer';

            const imagesContainer = document.getElementById('question-images');
            imagesContainer.innerHTML = '';

            if (question.imageData) {
                const img = document.createElement('img');
                img.src = `data:${question.imageData.mime};base64,${question.imageData.data}`;
                img.className = 'medical-image';
                img.alt = 'Medical Question Image';
                imagesContainer.appendChild(img);
            }

            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';

            question.options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'option-card w-full p-6 text-left bg-white rounded-xl shadow-lg';
                button.innerHTML = `<span class="font-bold text-blue-600 mr-4">${option.label}.</span>${option.text}`;

                if (!isTestMode && answers[index] !== null) {
                    button.disabled = true;
                    if (option.correct) {
                        button.classList.add('correct');
                    } else if (answers[index] === option.label) {
                        button.classList.add('incorrect');
                    }
                } else {
                    button.onclick = () => selectAnswer(option.label);
                }

                if (answers[index] === option.label) {
                    button.classList.add('selected');
                }

                optionsContainer.appendChild(button);
            });

            // Show feedback only in normal mode and if answered
            if (!isTestMode && answers[index] !== null) {
                showFeedback(index);
            } else {
                document.getElementById('feedback-section').classList.add('hidden');
            }

            document.getElementById('prev-btn').disabled = index === 0;

            if (answers[index] !== null) {
                if (index === questions.length - 1) {
                    document.getElementById('next-btn').classList.add('hidden');
                    document.getElementById('finish-btn').classList.remove('hidden');
                } else {
                    document.getElementById('next-btn').classList.remove('hidden');
                    document.getElementById('finish-btn').classList.add('hidden');
                }
            } else {
                document.getElementById('next-btn').classList.add('hidden');
                document.getElementById('finish-btn').classList.add('hidden');
            }

            const progress = ((index + 1) / questions.length) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
        }

        function selectAnswer(label) {
            const question = questions[currentQuestion];
            const correctOption = question.options.find(opt => opt.correct);
            const isCorrect = correctOption && label === correctOption.label;

            if (!answeredQuestions.has(currentQuestion)) {
                answeredQuestions.add(currentQuestion);
                if (isCorrect) {
                    correctCount++;
                } else {
                    incorrectCount++;
                }
            }

            answers[currentQuestion] = label;
            updateStats();
            
            showQuestion(currentQuestion);
        }

        function showFeedback(questionIndex) {
            const question = questions[questionIndex];
            const userAnswer = answers[questionIndex];
            const correctOption = question.options.find(opt => opt.correct);
            const userOption = question.options.find(opt => opt.label === userAnswer);
            const isCorrect = correctOption && userAnswer === correctOption.label;

            const feedbackSection = document.getElementById('feedback-section');
            const feedbackIcon = document.getElementById('feedback-icon');
            const feedbackMessage = document.getElementById('feedback-message');

            if (isCorrect) {
                feedbackSection.className = 'bg-green-50 border border-green-200 mb-8 p-6 rounded-2xl';
                feedbackIcon.textContent = '‚úÖ';
                feedbackMessage.textContent = 'Correct!';
                feedbackMessage.className = 'text-2xl font-bold mb-2 text-green-700';
            } else {
                feedbackSection.className = 'bg-red-50 border border-red-200 mb-8 p-6 rounded-2xl';
                feedbackIcon.textContent = '‚ùå';
                feedbackMessage.textContent = 'Incorrect';
                feedbackMessage.className = 'text-2xl font-bold mb-2 text-red-700';
            }

            document.getElementById('user-answer-display').innerHTML = `<span class="${isCorrect ? 'text-green-600' : 'text-red-600'}">${userAnswer}. ${userOption?.text || 'Unknown'}</span>`;
            document.getElementById('correct-answer-display').textContent = question.correctAnswer;

            const explanationSection = document.getElementById('explanation-section');
            if (question.explanationHTML && question.explanationHTML.trim()) {
                document.getElementById('explanation-content').innerHTML = question.explanationHTML;
                explanationSection.classList.remove('hidden');
            } else {
                explanationSection.classList.add('hidden');
            }

            feedbackSection.classList.remove('hidden');
        }

        function updateStats() {
            const totalAnswered = correctCount + incorrectCount;
            const accuracy = totalAnswered === 0 ? 0 : Math.round((correctCount / totalAnswered) * 100);

            document.getElementById('correct-stats').textContent = correctCount;
            document.getElementById('incorrect-stats').textContent = incorrectCount;
            document.getElementById('accuracy-stats').textContent = `${accuracy}%`;
            document.getElementById('progress-stats').textContent = `${totalAnswered}/${questions.length}`;
        }

        document.getElementById('prev-btn').onclick = () => {
            if (currentQuestion > 0) {
                showQuestion(currentQuestion - 1);
            }
        };
        
        document.getElementById('next-btn').onclick = () => {
            if (currentQuestion < questions.length - 1) {
                showQuestion(currentQuestion + 1);
            }
        };
        
        document.getElementById('finish-btn').onclick = showFinalResults;

        function showFinalResults() {
            if (isTestMode) {
                showTestModeResults();
            } else {
                showNormalModeResults();
            }
        }

        function showTestModeResults() {
            const accuracy = (correctCount + incorrectCount === 0) ? 0 : Math.round((correctCount / (correctCount + incorrectCount)) * 100);

            document.getElementById('quiz-section').classList.add('hidden');
            document.getElementById('test-results').classList.remove('hidden');

            document.getElementById('test-final-correct').textContent = correctCount;
            document.getElementById('test-final-incorrect').textContent = incorrectCount;
            document.getElementById('test-final-accuracy').textContent = `${accuracy}%`;

            let gradeIcon = 'üéØ';
            if (accuracy >= 90) {
                gradeIcon = 'üèÜ';
            } else if (accuracy >= 80) {
                gradeIcon = 'üéâ';
            } else if (accuracy >= 70) {
                gradeIcon = 'üëç';
            } else if (accuracy >= 60) {
                gradeIcon = 'üìö';
            } else {
                gradeIcon = 'üí™';
            }

            document.getElementById('test-grade-icon').textContent = gradeIcon;

            // Show detailed review
            const reviewContainer = document.getElementById('test-review-details');
            reviewContainer.innerHTML = '';

            questions.forEach((question, index) => {
                const userAnswer = answers[index];
                const correctOption = question.options.find(opt => opt.correct);
                const userOption = question.options.find(opt => opt.label === userAnswer);
                const isCorrect = correctOption && userAnswer === correctOption.label;

                const reviewCard = document.createElement('div');
                reviewCard.className = `border-l-4 p-4 bg-white rounded-lg shadow-sm ${isCorrect ? 'border-green-500' : 'border-red-500'}`;
                
                reviewCard.innerHTML = `
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="font-bold text-gray-800">Question ${index + 1}</h4>
                        <span class="text-2xl">${isCorrect ? '‚úÖ' : '‚ùå'}</span>
                    </div>
                    <p class="text-gray-700 mb-3">${question.text}</p>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <strong class="text-gray-600">Your Answer:</strong><br>
                            <span class="${isCorrect ? 'text-green-600' : 'text-red-600'}">${userAnswer}. ${userOption?.text || 'Not answered'}</span>
                        </div>
                        <div>
                            <strong class="text-gray-600">Correct Answer:</strong><br>
                            <span class="text-green-600">${question.correctAnswer}</span>
                        </div>
                    </div>
                    ${question.explanationHTML ? `
                        <div class="mt-3 p-3 bg-blue-50 rounded-lg">
                            <strong class="text-blue-800">Explanation:</strong>
                            <div class="mt-2 explanation-content">${question.explanationHTML}</div>
                        </div>
                    ` : ''}
                `;
                
                reviewContainer.appendChild(reviewCard);
            });
        }

        function showNormalModeResults() {
            const accuracy = (correctCount + incorrectCount === 0) ? 0 : Math.round((correctCount / (correctCount + incorrectCount)) * 100);

            document.getElementById('quiz-section').classList.add('hidden');
            document.getElementById('final-results').classList.remove('hidden');

            document.getElementById('final-correct').textContent = correctCount;
            document.getElementById('final-incorrect').textContent = incorrectCount;
            document.getElementById('final-accuracy').textContent = `${accuracy}%`;

            let gradeIcon = 'üéØ';
            if (accuracy >= 90) {
                gradeIcon = 'üèÜ';
            } else if (accuracy >= 80) {
                gradeIcon = 'üéâ';
            } else if (accuracy >= 70) {
                gradeIcon = 'üëç';
            } else if (accuracy >= 60) {
                gradeIcon = 'üìö';
            } else {
                gradeIcon = 'üí™';
            }

            document.getElementById('final-grade-icon').textContent = gradeIcon;
        }
    </script>
</body>
</html>