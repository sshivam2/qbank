<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>28_Irritable Bowel Syndrome - Marrow Medicine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .medical-quiz {
            font-family: Segoe UI, Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .question-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .option-card {
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .option-card:hover {
            border-color: #3b82f6;
            transform: translateY(-2px);
        }
        
        .option-card.selected {
            background: #3b82f6;
            color: white;
            border-color: #1d4ed8;
        }
        
        .option-card.correct {
            background: #10b981;
            color: white;
            border-color: #059669;
        }
        
        .option-card.incorrect {
            background: #ef4444;
            color: white;
            border-color: #dc2626;
        }
        
        .progress-bar {
            background: linear-gradient(to right, #10b981, #059669);
            transition: width 0.3s;
        }
        
        .medical-image {
            max-width: 100%;
            max-height: 400px;
            height: auto;
            border-radius: 12px;
            margin: 20px auto;
            display: block;
        }
        
        .hidden {
            display: none !important;
        }

        .explanation-content {
            font-family: Segoe UI, Tahoma, Geneva, Verdana, sans-serif;
            font-size: 1.05rem;
            line-height: 1.7;
            color: #374151;
            text-align: left;
        }
        
        .explanation-content p {
            margin-bottom: 1rem;
            text-align: justify;
        }
        
        .explanation-content strong, .explanation-content b {
            font-weight: 600;
            color: #1f2937;
        }
        
        .explanation-content img {
            max-width: 100%;
            height: auto;
            margin: 1.5rem auto;
            display: block;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>

<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen medical-quiz">
    <header class="bg-white shadow-xl p-6">
        <div class="container mx-auto flex justify-between items-center">
            <div>
                <h1 class="text-3xl font-bold text-gray-800">28_Irritable Bowel Syndrome</h1>
                <p class="text-gray-600 mt-2">Marrow ‚Ä¢ Medicine ‚Ä¢ Interactive Learning</p>
            </div>
            <div class="flex gap-2">
                <button class="bg-gray-500 text-white px-3 py-2 text-sm rounded-lg hover:bg-gray-600 transition" 
                        onclick="window.location.href='marrow_medicine.html'">
                    ‚Üê Topics
                </button>
                <button class="bg-purple-500 text-white px-3 py-2 text-sm rounded-lg hover:bg-purple-600 transition" 
                        onclick="window.location.href='marrow.html'">
                    üìö Marrow
                </button>
                <button class="bg-blue-500 text-white px-3 py-2 text-sm rounded-lg hover:bg-blue-600 transition" 
                        onclick="window.location.href='index.html'">
                    üè† Home
                </button>
            </div>
        </div>
    </header>

    <!-- Statistics Bar (Hidden in Test Mode) -->
    <div class="bg-white shadow-lg p-4" id="stats-bar">
        <div class="container mx-auto flex justify-center gap-8">
            <div class="text-center">
                <div class="text-2xl font-bold text-green-600" id="correct-stats">0</div>
                <div class="text-sm text-gray-600">Correct</div>
            </div>
            <div class="text-center">
                <div class="text-2xl font-bold text-red-600" id="incorrect-stats">0</div>
                <div class="text-sm text-gray-600">Incorrect</div>
            </div>
            <div class="text-center">
                <div class="text-2xl font-bold text-blue-600" id="accuracy-stats">0%</div>
                <div class="text-sm text-gray-600">Accuracy</div>
            </div>
            <div class="text-center">
                <div class="text-2xl font-bold text-purple-600" id="progress-stats">0/15</div>
                <div class="text-sm text-gray-600">Progress</div>
            </div>
        </div>
    </div>

    <!-- Quiz Section -->
    <section class="container mx-auto p-6" id="quiz-section">
        <div class="bg-white rounded-2xl shadow-xl p-8">
            <!-- Progress Bar -->
            <div class="w-full bg-gray-200 rounded-full h-4 mb-8">
                <div class="progress-bar h-4 rounded-full" id="progress-bar"></div>
            </div>

            <div class="flex justify-between items-center mb-8">
                <h2 class="text-2xl font-bold text-blue-700" id="question-number">Question 1 of 15</h2>
                <div class="text-sm text-gray-600" id="question-status">Click an option to answer</div>
            </div>

            <!-- Question Text -->
            <div class="mb-10">
                <div class="question-card text-white p-8 rounded-2xl mb-8" id="question-text"></div>
                
                <!-- Question Image -->
                <div class="text-center mb-8" id="question-images"></div>
                
                <!-- Options -->
                <div class="space-y-4" id="options"></div>
            </div>

            <!-- Answer Feedback Section (Normal Mode Only) -->
            <div class="hidden mb-8 p-6 rounded-2xl" id="feedback-section">
                <div class="text-center mb-4">
                    <div class="text-6xl mb-2" id="feedback-icon"></div>
                    <div class="text-2xl font-bold mb-2" id="feedback-message">Correct!</div>
                </div>
                
                <div class="grid md:grid-cols-2 gap-4 mb-4">
                    <div class="bg-white p-4 rounded-xl border">
                        <strong>Your Answer:</strong><br>
                        <span id="user-answer-display"></span>
                    </div>
                    <div class="bg-white p-4 rounded-xl border">
                        <strong>Correct Answer:</strong><br>
                        <span class="text-green-600" id="correct-answer-display"></span>
                    </div>
                </div>
                
                <div class="bg-blue-50 p-6 rounded-xl" id="explanation-section">
                    <strong class="text-lg text-blue-800">Explanation:</strong>
                    <div id="explanation-content" class="mt-3 explanation-content"></div>
                </div>
            </div>

            <!-- Navigation -->
            <div class="flex justify-between gap-4">
                <button class="bg-gray-400 text-white px-6 py-3 rounded-xl hover:bg-gray-500 transition" 
                        onclick="window.location.href='marrow_medicine.html'">
                    Back to Topics
                </button>
                
                <div class="flex gap-4">
                    <button class="bg-gray-400 text-white px-6 py-3 rounded-xl disabled" id="prev-btn">
                        Previous
                    </button>
                    <button class="bg-blue-500 text-white px-6 py-3 rounded-xl hidden" id="next-btn">
                        Next
                    </button>
                    <button class="bg-green-600 text-white px-6 py-3 rounded-xl font-bold hidden" id="finish-btn">
                        Finish Quiz
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Test Mode Final Results -->
    <section class="container mx-auto p-6 hidden" id="test-results">
        <div class="bg-white rounded-2xl shadow-xl p-8">
            <div class="text-center mb-8">
                <h2 class="text-4xl font-bold mb-4 text-blue-700">Test Complete! üéâ</h2>
                <div class="text-6xl mb-4" id="test-grade-icon">üéØ</div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-green-100 p-6 rounded-2xl text-center">
                    <div class="text-4xl font-bold text-green-600" id="test-final-correct">0</div>
                    <div class="font-semibold text-green-700">Correct Answers</div>
                </div>
                <div class="bg-red-100 p-6 rounded-2xl text-center">
                    <div class="text-4xl font-bold text-red-600" id="test-final-incorrect">0</div>
                    <div class="font-semibold text-red-700">Incorrect Answers</div>
                </div>
                <div class="bg-blue-100 p-6 rounded-2xl text-center">
                    <div class="text-4xl font-bold text-blue-600" id="test-final-accuracy">0%</div>
                    <div class="font-semibold text-blue-700">Final Accuracy</div>
                </div>
            </div>

            <!-- Detailed Review -->
            <div class="mb-8">
                <h3 class="text-2xl font-bold text-gray-800 mb-4">üìã Detailed Review</h3>
                <div id="test-review-details" class="space-y-4"></div>
            </div>
            
            <div class="flex justify-center gap-4">
                <button class="bg-purple-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-purple-700 transition" 
                        onclick="window.location.href='marrow_medicine.html'">
                    Back to Topics
                </button>
                <button class="bg-blue-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-blue-700 transition" 
                        onclick="window.location.reload()">
                    Retake Quiz
                </button>
            </div>
        </div>
    </section>

    <!-- Normal Mode Final Results -->
    <section class="container mx-auto p-6 hidden" id="final-results">
        <div class="bg-white rounded-2xl shadow-xl p-8">
            <div class="text-center mb-8">
                <h2 class="text-4xl font-bold mb-4 text-blue-700">Quiz Complete! üéâ</h2>
                <div class="text-6xl mb-4" id="final-grade-icon">üéØ</div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-green-100 p-6 rounded-2xl text-center">
                    <div class="text-4xl font-bold text-green-600" id="final-correct">0</div>
                    <div class="font-semibold text-green-700">Correct Answers</div>
                </div>
                <div class="bg-red-100 p-6 rounded-2xl text-center">
                    <div class="text-4xl font-bold text-red-600" id="final-incorrect">0</div>
                    <div class="font-semibold text-red-700">Incorrect Answers</div>
                </div>
                <div class="bg-blue-100 p-6 rounded-2xl text-center">
                    <div class="text-4xl font-bold text-blue-600" id="final-accuracy">0%</div>
                    <div class="font-semibold text-blue-700">Final Accuracy</div>
                </div>
            </div>
            
            <div class="flex justify-center gap-4">
                <button class="bg-purple-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-purple-700 transition" 
                        onclick="window.location.href='marrow_medicine.html'">
                    Back to Topics
                </button>
                <button class="bg-blue-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-blue-700 transition" 
                        onclick="window.location.reload()">
                    Retake Quiz
                </button>
            </div>
        </div>
    </section>

    <script>
        const questions = [
  {
    "id": 545,
    "text": "Q1. Which of the following is not a diagnostic criterion for irritable bowel syndrome?",
    "options": [
      {
        "label": "A",
        "text": "Abdominal pain related to defecation",
        "correct": false
      },
      {
        "label": "B",
        "text": "Persistent diarrhoea after a 48 hour fast",
        "correct": true
      },
      {
        "label": "C",
        "text": "Change in frequency of stool",
        "correct": false
      },
      {
        "label": "D",
        "text": "Change in form of stool",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Persistent diarrhoea after a 48-hour fast is not a diagnostic criteria for IBS.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "28_Irritable Bowel Syndrome",
    "deck_id": 1755954606660,
    "correctAnswer": "B. Persistent diarrhoea after a 48 hour fast"
  },
  {
    "id": 546,
    "text": "Q2. The most common pattern seen in irritable bowel syndrome patients is",
    "options": [
      {
        "label": "A",
        "text": "Diarrhoea only",
        "correct": false
      },
      {
        "label": "B",
        "text": "Constipation only",
        "correct": false
      },
      {
        "label": "C",
        "text": "Prolonged constipation followed by diarrhoea",
        "correct": false
      },
      {
        "label": "D",
        "text": "Constipation alternating with episodes of diarrhoea",
        "correct": true
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">The most common pattern in IBS patients is constipation alternating with episodes of diarrhoea. Based on bowel movement patterns, IBS is classified as: * IBS-C: Irritable bowel syndrome-constipation predominant * IBS-D: Irritable bowel syndrome-diarrhoea predominant * IBS-M: Irritable bowel syndrome-mixed 378 The majority of patients change subtypes over the course of illness. Note: Abdominal pain is a pre-requisite for the diagnosis of IBS. This means that for the diagnosis of IBS, recurrent abdominal pain must be present.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "28_Irritable Bowel Syndrome",
    "deck_id": 1755954606660,
    "correctAnswer": "D. Constipation alternating with episodes of diarrhoea"
  },
  {
    "id": 547,
    "text": "Q3. patient presents with a 3-month history of crampy abdominal pain associated with diarrhea. Which of the following features, if present, will support a diagnosis of irritable bowel syndrome?",
    "options": [
      {
        "label": "A",
        "text": "Steatorrhea",
        "correct": false
      },
      {
        "label": "B",
        "text": "Nocturnal diarrhoea",
        "correct": false
      },
      {
        "label": "C",
        "text": "Persistent diarrhoea after a 48 hour fast",
        "correct": false
      },
      {
        "label": "D",
        "text": "Onset of symptoms during a period of stress",
        "correct": true
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">The onset of symptoms during a period of stress or emotional upset is a feature that supports a diagnosis of irritable bowel syndrome (IBS). Features in favour of IBS: ¬¢ Abdominal pain that improves/worsens with defecation * Association with stress or emotional symptoms * Small volume of stools Features not in favour of IBS: * Onset of symptoms in old age * Presence of fever and weight loss ¬¢ Persistent diarrhoea after a 48h fast * Nocturnal diarrhoea * Steatorrhoea</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "28_Irritable Bowel Syndrome",
    "deck_id": 1755954606660,
    "correctAnswer": "D. Onset of symptoms during a period of stress"
  },
  {
    "id": 548,
    "text": "Q4. Which of the following is not implicated in the pathogenesis of irritable bowel syndrome?",
    "options": [
      {
        "label": "A",
        "text": "Visceral hypersensitivity",
        "correct": false
      },
      {
        "label": "B",
        "text": "Activation of mid-cingulate cortex 374",
        "correct": false
      },
      {
        "label": "C",
        "text": "Increased serotonin",
        "correct": false
      },
      {
        "label": "D",
        "text": "Decreased colonic motor potentials",
        "correct": true
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Decreased colonic motor potentials are not implicated in the pathogenesis of irritable bowel syndrome (IBS). On the contrary, increased colonic motor potentials are seen. The pathogenesis of IBS is poorly understood. However, the following have been implicated in its pathogenesis: * Increased colonic motor potentials lead to increased high-amplitude propagating contractions (HAPCs) which causes diarrhea. * Visceral hypersensitivity leads to exaggerated sensory responses to visceral stimulation by food. This explains the postprandial symptoms in IBS. * CNS dysregulation - dysfunctional activation of the mid-cingulate cortex and prefrontal lobes leads to increased perception of visceral pain. * Abnormal serotonin pathways - serotonin-containing enterochromaffin cells are increased in IBS patients. * Altered gut flora 379</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "28_Irritable Bowel Syndrome",
    "deck_id": 1755954606660,
    "correctAnswer": "D. Decreased colonic motor potentials"
  },
  {
    "id": 549,
    "text": "Q5. 35-year-old housewife has been diagnosed with irritable bowel syndrome - diarrhea predominant. Which neurotransmitter is associated with this condition?",
    "options": [
      {
        "label": "A",
        "text": "Acetylcholine",
        "correct": false
      },
      {
        "label": "B",
        "text": "Neuropeptide Y",
        "correct": false
      },
      {
        "label": "C",
        "text": "Vasoactive intestinal peptide",
        "correct": false
      },
      {
        "label": "D",
        "text": "Serotonin",
        "correct": true
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Serotonin is associated with irritable bowel syndrome diarrhoea type (IBS-D). Abnormal serotonin pathways is one of the causes for symptoms in IBS. The serotonin containing enterochromaffin cells are increased in a subset of IBS-D patients. This provides a rationale for the use of serotonin antagonists in the treatment of this condition.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "28_Irritable Bowel Syndrome",
    "deck_id": 1755954606660,
    "correctAnswer": "D. Serotonin"
  },
  {
    "id": 550,
    "text": "Q6. Which of the following parts of the brain are associated with irritable bowel syndrome?",
    "options": [
      {
        "label": "A",
        "text": "1 &amp;amp; 2",
        "correct": false
      },
      {
        "label": "B",
        "text": "3 &amp;amp; 4 Cc) 1 &amp;amp; 4",
        "correct": false
      },
      {
        "label": "C",
        "text": "2 &amp;amp; 3",
        "correct": true
      },
      {
        "label": "D",
        "text": "",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Mid cingulate cortex and prefrontal lobe are associated with IBS. Mid cingulate cortex: Modulation of this region is associated with changes in the subjective unpleasantness of pain. Prefrontal lobe: Dysfunction of this area leads to the increased perception of visceral pain.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "28_Irritable Bowel Syndrome",
    "deck_id": 1755954606660,
    "correctAnswer": "C. 2 &amp;amp; 3"
  },
  {
    "id": 551,
    "text": "Q7. Which of the following is not a risk factor for post-infectious irritable bowel syndrome?",
    "options": [
      {
        "label": "A",
        "text": "Smoking",
        "correct": false
      },
      {
        "label": "B",
        "text": "Depression",
        "correct": false
      },
      {
        "label": "C",
        "text": "Male gender",
        "correct": true
      },
      {
        "label": "D",
        "text": "Toxicity of infecting bacterial strain",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Male gender is not a risk factor for post-infectious IBS. Post-infectious IBS develops following a gastrointestinal infection with microbes such as Campylobacter, Salmonella and Shigella. Risk factors for developing post-infectious IBS: * Young age and female gender * Prolonged duration of illness * Toxicity of infecting bacterial strain * Smoking * Depression * Hypochondriasis</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "28_Irritable Bowel Syndrome",
    "deck_id": 1755954606660,
    "correctAnswer": "C. Male gender"
  },
  {
    "id": 552,
    "text": "Q8. In a suspected case of irritable bowel syndrome, which of the following investigations is not recommended?",
    "options": [
      {
        "label": "A",
        "text": "Complete blood count 375",
        "correct": false
      },
      {
        "label": "B",
        "text": "Sigmoidoscopy",
        "correct": false
      },
      {
        "label": "C",
        "text": "Stool examination for ova and parasites",
        "correct": false
      },
      {
        "label": "D",
        "text": "Stool fat test",
        "correct": true
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">A stool fat test is not recommended in a suspected case of irritable bowel syndrome (IBS). IBS is a clinical diagnosis that can be made without performing many tests if the patient presents with typical symptoms. However, it is recommended to perform the following tests in most patients to rule out other conditions: * Complete blood count * Sigmoidoscopic examination * Stool examination for ova and parasites 380 * 3-week lactose-free diet In patients &amp;gt; 40 years, air-contrast barium enema or colonoscopy should also be performed.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "28_Irritable Bowel Syndrome",
    "deck_id": 1755954606660,
    "correctAnswer": "D. Stool fat test"
  },
  {
    "id": 553,
    "text": "Q9. Which of the following is a marker of inflammatory bowel disease, which helps to rule out irritable bowel syndrome?",
    "options": [
      {
        "label": "A",
        "text": "Faecal fat",
        "correct": false
      },
      {
        "label": "B",
        "text": "Faecal lactoferrin",
        "correct": true
      },
      {
        "label": "C",
        "text": "Faecal trypsin",
        "correct": false
      },
      {
        "label": "D",
        "text": "Faecal chymotrypsin",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Fecal lactoferrin is the marker of IBD that is used to rule out irritable bowel syndrome. Fecal lactoferrin is a highly sensitive and specific marker for detecting intestinal inflammation. Fecal calprotectin is another marker of IBD and it is used to rule out irritable bowel syndrome and bacterial overgrowth. It correlates well with histologic inflammation, predicts relapses, and detects pouchitis. Option A: Fecal fat is normally digested by pancreatic lipase and absorbed from the jejunum. In disorders of exocrine pancreatic function, fat absorption decreases, resulting in steatorrhea and increased fecal fat. Options C &amp;amp; D: Fecal trypsin, chymotrypsin are pancreatic enzymes, therefore a decrease in fecal levels below normal suggests a disorder of the exocrine pancreas.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "28_Irritable Bowel Syndrome",
    "deck_id": 1755954606660,
    "correctAnswer": "B. Faecal lactoferrin"
  },
  {
    "id": 554,
    "text": "Q10. Which of the following statements is false regarding the FODMAPs diet recommended for a patient with irritable bowel syndrome?",
    "options": [
      {
        "label": "A",
        "text": "It includes fermentable oligosaccharides",
        "correct": false
      },
      {
        "label": "B",
        "text": "Diet low in FODMAPs reduces symptoms in IBS patients",
        "correct": false
      },
      {
        "label": "C",
        "text": "Sorbitol is an example of FODMAP",
        "correct": false
      },
      {
        "label": "D",
        "text": "FODMAPs are highly absorbed by the small intestine",
        "correct": true
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">FODMAPs are poorly absorbed in the small intestine. FODMAPs stands for Fermentable Oligosaccharides, Disaccharides, Monosaccharides, And Polyols. Foodstuff containing lactose, fructose, and sorbitol are some examples of FODMAPs. Since FODMAPs are poorly absorbed, they are fermented by gut bacteria in the colon to produce gas and osmotically active carbohydrates. So, a diet low in FODMAPs is recommended to reduce symptoms in IBS patients.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "28_Irritable Bowel Syndrome",
    "deck_id": 1755954606660,
    "correctAnswer": "D. FODMAPs are highly absorbed by the small intestine"
  },
  {
    "id": 555,
    "text": "Q11. 35-year-old woman with constipation-predominant irritable bowel syndrome presents with worsening abdominal pain and bloating. Which of the following drugs can be prescribed for her condition?",
    "options": [
      {
        "label": "A",
        "text": "Loperamide",
        "correct": false
      },
      {
        "label": "B",
        "text": "Lubiprostone",
        "correct": true
      },
      {
        "label": "C",
        "text": "Alosetron",
        "correct": false
      },
      {
        "label": "D",
        "text": "Eluxadoline",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Lubiprostone is used in the treatment of constipation-predominant IBS. Lubiprostone is a chloride channel activator that promotes the secretion of water and chloride into the bowel and improves bowel movements. Loperamide, alosetron, and eluxadoline (opioid mu receptor agonist) are used in the treatment of diarrhea-predominant IBS.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "28_Irritable Bowel Syndrome",
    "deck_id": 1755954606660,
    "correctAnswer": "B. Lubiprostone"
  },
  {
    "id": 556,
    "text": "Q12. 376 You have prescribed paroxetine to a patient with irritable bowel syndrome. This medication is most effective in reducing which of the following symptoms?",
    "options": [
      {
        "label": "A",
        "text": "Diarrhoea",
        "correct": false
      },
      {
        "label": "B",
        "text": "Constipation",
        "correct": true
      },
      {
        "label": "C",
        "text": "Abdominal pain",
        "correct": false
      },
      {
        "label": "D",
        "text": "Bloating",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Paroxetine is most effective in treating constipation. It is a selective serotonin reuptake inhibitor (SSRI) that accelerates oro-caecal transit. 381 Note: Citalopram is an SSRI that is effective in the management of pain in IBS. It blunts perception of rectal distension and reduces the magnitude of gastrocolic reflex.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "28_Irritable Bowel Syndrome",
    "deck_id": 1755954606660,
    "correctAnswer": "B. Constipation"
  },
  {
    "id": 557,
    "text": "Q13. Drug &apos;X&apos;, a5 HT3 receptor antagonist, is prescribed to treat a patient with diarrhea-predominant irritable bowel syndrome. Identify the drug &apos;X‚Äô.",
    "options": [
      {
        "label": "A",
        "text": "Alosetron",
        "correct": true
      },
      {
        "label": "B",
        "text": "Tegaserod",
        "correct": false
      },
      {
        "label": "C",
        "text": "Lubiprostone",
        "correct": false
      },
      {
        "label": "D",
        "text": "Ondansetron",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Alosetron is a 5-HT3 receptor antagonist used in the treatment of IBS‚ÄîD. Options B and C: Tegaserod and lubiprostone are used in the treatment of constipation-predominant irritable bowel syndrome (IBS-C). Option D: Ondansetron is used in the treatment of nausea and vomiting.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "28_Irritable Bowel Syndrome",
    "deck_id": 1755954606660,
    "correctAnswer": "A. Alosetron"
  },
  {
    "id": 558,
    "text": "Q14. patient with irritable bowel disease was started on a drug. A few days after administration of the drug, the patient complained of acute GI distress suggestive of ischemic colitis. What was the drug taken by the patient?",
    "options": [
      {
        "label": "A",
        "text": "Lubiprostone",
        "correct": false
      },
      {
        "label": "B",
        "text": "Linaclotide",
        "correct": false
      },
      {
        "label": "C",
        "text": "Alosetron",
        "correct": true
      },
      {
        "label": "D",
        "text": "Tegaserod",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Ischaemic colitis is a side-effect of alosetron. Alosetron is a 5-HT3 receptor antagonist that is used to reduce diarrhoea in irritable bowel syndrome. Option A: Lubiprostone is associated with nausea and diarrhea. Option B: Linaclotide is associated with diarrhea. Option D: Tegaserod is associated with cardiac toxicity.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "28_Irritable Bowel Syndrome",
    "deck_id": 1755954606660,
    "correctAnswer": "C. Alosetron"
  },
  {
    "id": 559,
    "text": "Q15. 28-year-old female patient comes to you for advice. She is a known case of irritable bowel syndrome. She asks you when is the best time to take antispasmodics for her postprandial abdominal pain. What would you suggest?",
    "options": [
      {
        "label": "A",
        "text": "30 minutes before meals ee ee ee ee ee ee ee en ee ee ee ee ee Detailed Explanations Solution to Question 1: Persistent diarrhoea after a 48-hour fast is not a diagnostic criteria for IBS. Solution to Question 2: The most common pattern in IBS patients is constipation alternating with episodes of diarrhoea. Based on bowel movement patterns, IBS is classified as: * IBS-C: Irritable bowel syndrome-constipation predominant * IBS-D: Irritable bowel syndrome-diarrhoea predominant * IBS-M: Irritable bowel syndrome-mixed 378",
        "correct": true
      },
      {
        "label": "B",
        "text": "30 minutes after meals",
        "correct": false
      },
      {
        "label": "C",
        "text": "Along with meals 377",
        "correct": false
      },
      {
        "label": "D",
        "text": "When the pain starts a",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">The best time to take antispasmodics for postprandial pain is 30 min before meals. Antispasmodics such as dicyclomine inhibit the gastrocolic reflex and thus reduce pain due to intestinal spasms. It is best taken 30 min before meals so that the effective blood levels are achieved shortly before the anticipated onset of pain. 382</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "28_Irritable Bowel Syndrome",
    "deck_id": 1755954606660,
    "correctAnswer": "A. 30 minutes before meals ee ee ee ee ee ee ee en ee ee ee ee ee Detailed Explanations Solution to Question 1: Persistent diarrhoea after a 48-hour fast is not a diagnostic criteria for IBS. Solution to Question 2: The most common pattern in IBS patients is constipation alternating with episodes of diarrhoea. Based on bowel movement patterns, IBS is classified as: * IBS-C: Irritable bowel syndrome-constipation predominant * IBS-D: Irritable bowel syndrome-diarrhoea predominant * IBS-M: Irritable bowel syndrome-mixed 378"
  }
];
        let currentQuestion = 0;
        let answers = [];
        let correctCount = 0;
        let incorrectCount = 0;
        let answeredQuestions = new Set();
        let isTestMode = localStorage.getItem('testMode') === 'true' || false;

        console.log('Quiz loaded with', questions.length, 'questions');
        console.log('Test mode:', isTestMode);

        // Hide stats bar if test mode is enabled
        if (isTestMode) {
            document.addEventListener('DOMContentLoaded', () => {
                document.getElementById('stats-bar').style.display = 'none';
            });
        }

        // Auto-start quiz
        startQuiz();

        function startQuiz() {
            answers = new Array(questions.length).fill(null);
            correctCount = 0;
            incorrectCount = 0;
            answeredQuestions = new Set();
            currentQuestion = 0;
            showQuestion(0);
            updateStats();
        }

        function showQuestion(index) {
            currentQuestion = index;
            const question = questions[index];

            document.getElementById('question-number').textContent = `Question ${index + 1} of ${questions.length}`;
            document.getElementById('question-text').innerHTML = question.text;
            document.getElementById('question-status').textContent = answers[index] ? 'Question answered' : 'Click an option to answer';

            const imagesContainer = document.getElementById('question-images');
            imagesContainer.innerHTML = '';

            if (question.imageData) {
                const img = document.createElement('img');
                img.src = `data:${question.imageData.mime};base64,${question.imageData.data}`;
                img.className = 'medical-image';
                img.alt = 'Medical Question Image';
                imagesContainer.appendChild(img);
            }

            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';

            question.options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'option-card w-full p-6 text-left bg-white rounded-xl shadow-lg';
                button.innerHTML = `<span class="font-bold text-blue-600 mr-4">${option.label}.</span>${option.text}`;

                if (!isTestMode && answers[index] !== null) {
                    button.disabled = true;
                    if (option.correct) {
                        button.classList.add('correct');
                    } else if (answers[index] === option.label) {
                        button.classList.add('incorrect');
                    }
                } else {
                    button.onclick = () => selectAnswer(option.label);
                }

                if (answers[index] === option.label) {
                    button.classList.add('selected');
                }

                optionsContainer.appendChild(button);
            });

            // Show feedback only in normal mode and if answered
            if (!isTestMode && answers[index] !== null) {
                showFeedback(index);
            } else {
                document.getElementById('feedback-section').classList.add('hidden');
            }

            document.getElementById('prev-btn').disabled = index === 0;

            if (answers[index] !== null) {
                if (index === questions.length - 1) {
                    document.getElementById('next-btn').classList.add('hidden');
                    document.getElementById('finish-btn').classList.remove('hidden');
                } else {
                    document.getElementById('next-btn').classList.remove('hidden');
                    document.getElementById('finish-btn').classList.add('hidden');
                }
            } else {
                document.getElementById('next-btn').classList.add('hidden');
                document.getElementById('finish-btn').classList.add('hidden');
            }

            const progress = ((index + 1) / questions.length) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
        }

        function selectAnswer(label) {
            const question = questions[currentQuestion];
            const correctOption = question.options.find(opt => opt.correct);
            const isCorrect = correctOption && label === correctOption.label;

            if (!answeredQuestions.has(currentQuestion)) {
                answeredQuestions.add(currentQuestion);
                if (isCorrect) {
                    correctCount++;
                } else {
                    incorrectCount++;
                }
            }

            answers[currentQuestion] = label;
            updateStats();
            
            showQuestion(currentQuestion);
        }

        function showFeedback(questionIndex) {
            const question = questions[questionIndex];
            const userAnswer = answers[questionIndex];
            const correctOption = question.options.find(opt => opt.correct);
            const userOption = question.options.find(opt => opt.label === userAnswer);
            const isCorrect = correctOption && userAnswer === correctOption.label;

            const feedbackSection = document.getElementById('feedback-section');
            const feedbackIcon = document.getElementById('feedback-icon');
            const feedbackMessage = document.getElementById('feedback-message');

            if (isCorrect) {
                feedbackSection.className = 'bg-green-50 border border-green-200 mb-8 p-6 rounded-2xl';
                feedbackIcon.textContent = '‚úÖ';
                feedbackMessage.textContent = 'Correct!';
                feedbackMessage.className = 'text-2xl font-bold mb-2 text-green-700';
            } else {
                feedbackSection.className = 'bg-red-50 border border-red-200 mb-8 p-6 rounded-2xl';
                feedbackIcon.textContent = '‚ùå';
                feedbackMessage.textContent = 'Incorrect';
                feedbackMessage.className = 'text-2xl font-bold mb-2 text-red-700';
            }

            document.getElementById('user-answer-display').innerHTML = `<span class="${isCorrect ? 'text-green-600' : 'text-red-600'}">${userAnswer}. ${userOption?.text || 'Unknown'}</span>`;
            document.getElementById('correct-answer-display').textContent = question.correctAnswer;

            const explanationSection = document.getElementById('explanation-section');
            if (question.explanationHTML && question.explanationHTML.trim()) {
                document.getElementById('explanation-content').innerHTML = question.explanationHTML;
                explanationSection.classList.remove('hidden');
            } else {
                explanationSection.classList.add('hidden');
            }

            feedbackSection.classList.remove('hidden');
        }

        function updateStats() {
            const totalAnswered = correctCount + incorrectCount;
            const accuracy = totalAnswered === 0 ? 0 : Math.round((correctCount / totalAnswered) * 100);

            document.getElementById('correct-stats').textContent = correctCount;
            document.getElementById('incorrect-stats').textContent = incorrectCount;
            document.getElementById('accuracy-stats').textContent = `${accuracy}%`;
            document.getElementById('progress-stats').textContent = `${totalAnswered}/${questions.length}`;
        }

        document.getElementById('prev-btn').onclick = () => {
            if (currentQuestion > 0) {
                showQuestion(currentQuestion - 1);
            }
        };
        
        document.getElementById('next-btn').onclick = () => {
            if (currentQuestion < questions.length - 1) {
                showQuestion(currentQuestion + 1);
            }
        };
        
        document.getElementById('finish-btn').onclick = showFinalResults;

        function showFinalResults() {
            if (isTestMode) {
                showTestModeResults();
            } else {
                showNormalModeResults();
            }
        }

        function showTestModeResults() {
            const accuracy = (correctCount + incorrectCount === 0) ? 0 : Math.round((correctCount / (correctCount + incorrectCount)) * 100);

            document.getElementById('quiz-section').classList.add('hidden');
            document.getElementById('test-results').classList.remove('hidden');

            document.getElementById('test-final-correct').textContent = correctCount;
            document.getElementById('test-final-incorrect').textContent = incorrectCount;
            document.getElementById('test-final-accuracy').textContent = `${accuracy}%`;

            let gradeIcon = 'üéØ';
            if (accuracy >= 90) {
                gradeIcon = 'üèÜ';
            } else if (accuracy >= 80) {
                gradeIcon = 'üéâ';
            } else if (accuracy >= 70) {
                gradeIcon = 'üëç';
            } else if (accuracy >= 60) {
                gradeIcon = 'üìö';
            } else {
                gradeIcon = 'üí™';
            }

            document.getElementById('test-grade-icon').textContent = gradeIcon;

            // Show detailed review
            const reviewContainer = document.getElementById('test-review-details');
            reviewContainer.innerHTML = '';

            questions.forEach((question, index) => {
                const userAnswer = answers[index];
                const correctOption = question.options.find(opt => opt.correct);
                const userOption = question.options.find(opt => opt.label === userAnswer);
                const isCorrect = correctOption && userAnswer === correctOption.label;

                const reviewCard = document.createElement('div');
                reviewCard.className = `border-l-4 p-4 bg-white rounded-lg shadow-sm ${isCorrect ? 'border-green-500' : 'border-red-500'}`;
                
                reviewCard.innerHTML = `
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="font-bold text-gray-800">Question ${index + 1}</h4>
                        <span class="text-2xl">${isCorrect ? '‚úÖ' : '‚ùå'}</span>
                    </div>
                    <p class="text-gray-700 mb-3">${question.text}</p>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <strong class="text-gray-600">Your Answer:</strong><br>
                            <span class="${isCorrect ? 'text-green-600' : 'text-red-600'}">${userAnswer}. ${userOption?.text || 'Not answered'}</span>
                        </div>
                        <div>
                            <strong class="text-gray-600">Correct Answer:</strong><br>
                            <span class="text-green-600">${question.correctAnswer}</span>
                        </div>
                    </div>
                    ${question.explanationHTML ? `
                        <div class="mt-3 p-3 bg-blue-50 rounded-lg">
                            <strong class="text-blue-800">Explanation:</strong>
                            <div class="mt-2 explanation-content">${question.explanationHTML}</div>
                        </div>
                    ` : ''}
                `;
                
                reviewContainer.appendChild(reviewCard);
            });
        }

        function showNormalModeResults() {
            const accuracy = (correctCount + incorrectCount === 0) ? 0 : Math.round((correctCount / (correctCount + incorrectCount)) * 100);

            document.getElementById('quiz-section').classList.add('hidden');
            document.getElementById('final-results').classList.remove('hidden');

            document.getElementById('final-correct').textContent = correctCount;
            document.getElementById('final-incorrect').textContent = incorrectCount;
            document.getElementById('final-accuracy').textContent = `${accuracy}%`;

            let gradeIcon = 'üéØ';
            if (accuracy >= 90) {
                gradeIcon = 'üèÜ';
            } else if (accuracy >= 80) {
                gradeIcon = 'üéâ';
            } else if (accuracy >= 70) {
                gradeIcon = 'üëç';
            } else if (accuracy >= 60) {
                gradeIcon = 'üìö';
            } else {
                gradeIcon = 'üí™';
            }

            document.getElementById('final-grade-icon').textContent = gradeIcon;
        }
    </script>
</body>
</html>