<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>16_Reproductive Endocrinology - Marrow Medicine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .medical-quiz {
            font-family: Segoe UI, Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .question-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .option-card {
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .option-card:hover {
            border-color: #3b82f6;
            transform: translateY(-2px);
        }
        
        .option-card.selected {
            background: #3b82f6;
            color: white;
            border-color: #1d4ed8;
        }
        
        .option-card.correct {
            background: #10b981;
            color: white;
            border-color: #059669;
        }
        
        .option-card.incorrect {
            background: #ef4444;
            color: white;
            border-color: #dc2626;
        }
        
        .progress-bar {
            background: linear-gradient(to right, #10b981, #059669);
            transition: width 0.3s;
        }
        
        .medical-image {
            max-width: 100%;
            max-height: 400px;
            height: auto;
            border-radius: 12px;
            margin: 20px auto;
            display: block;
        }
        
        .hidden {
            display: none !important;
        }

        .explanation-content {
            font-family: Segoe UI, Tahoma, Geneva, Verdana, sans-serif;
            font-size: 1.05rem;
            line-height: 1.7;
            color: #374151;
            text-align: left;
        }
        
        .explanation-content p {
            margin-bottom: 1rem;
            text-align: justify;
        }
        
        .explanation-content strong, .explanation-content b {
            font-weight: 600;
            color: #1f2937;
        }
        
        .explanation-content img {
            max-width: 100%;
            height: auto;
            margin: 1.5rem auto;
            display: block;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>

<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen medical-quiz">
    <header class="bg-white shadow-xl p-6">
        <div class="container mx-auto flex justify-between items-center">
            <div>
                <h1 class="text-3xl font-bold text-gray-800">16_Reproductive Endocrinology</h1>
                <p class="text-gray-600 mt-2">Marrow ‚Ä¢ Medicine ‚Ä¢ Interactive Learning</p>
            </div>
            <div class="flex gap-2">
                <button class="bg-gray-500 text-white px-3 py-2 text-sm rounded-lg hover:bg-gray-600 transition" 
                        onclick="window.location.href='marrow_medicine.html'">
                    ‚Üê Topics
                </button>
                <button class="bg-purple-500 text-white px-3 py-2 text-sm rounded-lg hover:bg-purple-600 transition" 
                        onclick="window.location.href='marrow.html'">
                    üìö Marrow
                </button>
                <button class="bg-blue-500 text-white px-3 py-2 text-sm rounded-lg hover:bg-blue-600 transition" 
                        onclick="window.location.href='index.html'">
                    üè† Home
                </button>
            </div>
        </div>
    </header>

    <!-- Statistics Bar (Hidden in Test Mode) -->
    <div class="bg-white shadow-lg p-4" id="stats-bar">
        <div class="container mx-auto flex justify-center gap-8">
            <div class="text-center">
                <div class="text-2xl font-bold text-green-600" id="correct-stats">0</div>
                <div class="text-sm text-gray-600">Correct</div>
            </div>
            <div class="text-center">
                <div class="text-2xl font-bold text-red-600" id="incorrect-stats">0</div>
                <div class="text-sm text-gray-600">Incorrect</div>
            </div>
            <div class="text-center">
                <div class="text-2xl font-bold text-blue-600" id="accuracy-stats">0%</div>
                <div class="text-sm text-gray-600">Accuracy</div>
            </div>
            <div class="text-center">
                <div class="text-2xl font-bold text-purple-600" id="progress-stats">0/14</div>
                <div class="text-sm text-gray-600">Progress</div>
            </div>
        </div>
    </div>

    <!-- Quiz Section -->
    <section class="container mx-auto p-6" id="quiz-section">
        <div class="bg-white rounded-2xl shadow-xl p-8">
            <!-- Progress Bar -->
            <div class="w-full bg-gray-200 rounded-full h-4 mb-8">
                <div class="progress-bar h-4 rounded-full" id="progress-bar"></div>
            </div>

            <div class="flex justify-between items-center mb-8">
                <h2 class="text-2xl font-bold text-blue-700" id="question-number">Question 1 of 14</h2>
                <div class="text-sm text-gray-600" id="question-status">Click an option to answer</div>
            </div>

            <!-- Question Text -->
            <div class="mb-10">
                <div class="question-card text-white p-8 rounded-2xl mb-8" id="question-text"></div>
                
                <!-- Question Image -->
                <div class="text-center mb-8" id="question-images"></div>
                
                <!-- Options -->
                <div class="space-y-4" id="options"></div>
            </div>

            <!-- Answer Feedback Section (Normal Mode Only) -->
            <div class="hidden mb-8 p-6 rounded-2xl" id="feedback-section">
                <div class="text-center mb-4">
                    <div class="text-6xl mb-2" id="feedback-icon"></div>
                    <div class="text-2xl font-bold mb-2" id="feedback-message">Correct!</div>
                </div>
                
                <div class="grid md:grid-cols-2 gap-4 mb-4">
                    <div class="bg-white p-4 rounded-xl border">
                        <strong>Your Answer:</strong><br>
                        <span id="user-answer-display"></span>
                    </div>
                    <div class="bg-white p-4 rounded-xl border">
                        <strong>Correct Answer:</strong><br>
                        <span class="text-green-600" id="correct-answer-display"></span>
                    </div>
                </div>
                
                <div class="bg-blue-50 p-6 rounded-xl" id="explanation-section">
                    <strong class="text-lg text-blue-800">Explanation:</strong>
                    <div id="explanation-content" class="mt-3 explanation-content"></div>
                </div>
            </div>

            <!-- Navigation -->
            <div class="flex justify-between gap-4">
                <button class="bg-gray-400 text-white px-6 py-3 rounded-xl hover:bg-gray-500 transition" 
                        onclick="window.location.href='marrow_medicine.html'">
                    Back to Topics
                </button>
                
                <div class="flex gap-4">
                    <button class="bg-gray-400 text-white px-6 py-3 rounded-xl disabled" id="prev-btn">
                        Previous
                    </button>
                    <button class="bg-blue-500 text-white px-6 py-3 rounded-xl hidden" id="next-btn">
                        Next
                    </button>
                    <button class="bg-green-600 text-white px-6 py-3 rounded-xl font-bold hidden" id="finish-btn">
                        Finish Quiz
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Test Mode Final Results -->
    <section class="container mx-auto p-6 hidden" id="test-results">
        <div class="bg-white rounded-2xl shadow-xl p-8">
            <div class="text-center mb-8">
                <h2 class="text-4xl font-bold mb-4 text-blue-700">Test Complete! üéâ</h2>
                <div class="text-6xl mb-4" id="test-grade-icon">üéØ</div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-green-100 p-6 rounded-2xl text-center">
                    <div class="text-4xl font-bold text-green-600" id="test-final-correct">0</div>
                    <div class="font-semibold text-green-700">Correct Answers</div>
                </div>
                <div class="bg-red-100 p-6 rounded-2xl text-center">
                    <div class="text-4xl font-bold text-red-600" id="test-final-incorrect">0</div>
                    <div class="font-semibold text-red-700">Incorrect Answers</div>
                </div>
                <div class="bg-blue-100 p-6 rounded-2xl text-center">
                    <div class="text-4xl font-bold text-blue-600" id="test-final-accuracy">0%</div>
                    <div class="font-semibold text-blue-700">Final Accuracy</div>
                </div>
            </div>

            <!-- Detailed Review -->
            <div class="mb-8">
                <h3 class="text-2xl font-bold text-gray-800 mb-4">üìã Detailed Review</h3>
                <div id="test-review-details" class="space-y-4"></div>
            </div>
            
            <div class="flex justify-center gap-4">
                <button class="bg-purple-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-purple-700 transition" 
                        onclick="window.location.href='marrow_medicine.html'">
                    Back to Topics
                </button>
                <button class="bg-blue-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-blue-700 transition" 
                        onclick="window.location.reload()">
                    Retake Quiz
                </button>
            </div>
        </div>
    </section>

    <!-- Normal Mode Final Results -->
    <section class="container mx-auto p-6 hidden" id="final-results">
        <div class="bg-white rounded-2xl shadow-xl p-8">
            <div class="text-center mb-8">
                <h2 class="text-4xl font-bold mb-4 text-blue-700">Quiz Complete! üéâ</h2>
                <div class="text-6xl mb-4" id="final-grade-icon">üéØ</div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-green-100 p-6 rounded-2xl text-center">
                    <div class="text-4xl font-bold text-green-600" id="final-correct">0</div>
                    <div class="font-semibold text-green-700">Correct Answers</div>
                </div>
                <div class="bg-red-100 p-6 rounded-2xl text-center">
                    <div class="text-4xl font-bold text-red-600" id="final-incorrect">0</div>
                    <div class="font-semibold text-red-700">Incorrect Answers</div>
                </div>
                <div class="bg-blue-100 p-6 rounded-2xl text-center">
                    <div class="text-4xl font-bold text-blue-600" id="final-accuracy">0%</div>
                    <div class="font-semibold text-blue-700">Final Accuracy</div>
                </div>
            </div>
            
            <div class="flex justify-center gap-4">
                <button class="bg-purple-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-purple-700 transition" 
                        onclick="window.location.href='marrow_medicine.html'">
                    Back to Topics
                </button>
                <button class="bg-blue-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-blue-700 transition" 
                        onclick="window.location.reload()">
                    Retake Quiz
                </button>
            </div>
        </div>
    </section>

    <script>
        const questions = [
  {
    "id": 331,
    "text": "Q1. Which of the following is not a feature of 11-beta-hydroxylase deficiency?",
    "options": [
      {
        "label": "A",
        "text": "Metabolic acidosis",
        "correct": true
      },
      {
        "label": "B",
        "text": "Hypokalemia",
        "correct": false
      },
      {
        "label": "C",
        "text": "Hypertension",
        "correct": false
      },
      {
        "label": "D",
        "text": "Virilization",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">11-beta-hydroxylase deficiency is associated with metabolic alkalosis, not metabolic acidosis. It is a rare form of congenital adrenal hyperplasia that presents with the following features: * Glucocorticoid deficiency: * Hypoglycemia * Hyperpigmentation around the genitals due to excess adrenocorticotropic hormone (ACTH) secretion * Mineralocorticoid excess: * Hypokalemia * Hypertension * Metabolic alkalosis ¬¢ Adrenal androgen excess ¬¢ Virilization in females * Precocious puberty in males 213</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "16_Reproductive Endocrinology",
    "deck_id": 1755954606938,
    "correctAnswer": "A. Metabolic acidosis"
  },
  {
    "id": 332,
    "text": "Q2. neonate with ambiguous genitalia undergoes karyotyping and is confirmed to have a 46XY genotype. His blood pressure is 140/80 mm Hg and serum potassium is 1. 9 mEq/L. Which of the following is responsible for these findings?",
    "options": [
      {
        "label": "A",
        "text": "11-deoxycorticosterone",
        "correct": true
      },
      {
        "label": "B",
        "text": "Cortisol",
        "correct": false
      },
      {
        "label": "C",
        "text": "17-hydroxypregnanediol",
        "correct": false
      },
      {
        "label": "D",
        "text": "17-hydroxyprogesterone",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">This clinical scenario with ambiguous genitalia in a male neonate is suggestive of 17 alpha-hydroxylase deficiency. It causes hypertension and hypokalemia due to the accumulation of 11-deoxycorticosterone, which is a mineralocorticoid causing sodium retention. 11-hydroxylase deficiency also leads to the accumulation of 11-deoxycorticosterone.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "16_Reproductive Endocrinology",
    "deck_id": 1755954606938,
    "correctAnswer": "A. 11-deoxycorticosterone"
  },
  {
    "id": 333,
    "text": "Q3. Which of the following abnormalities will you see in a child with salt-wasting congenital adrenal hyperplasia?",
    "options": [
      {
        "label": "A",
        "text": "Hypoglycemia",
        "correct": true
      },
      {
        "label": "B",
        "text": "Hypernatremia",
        "correct": false
      },
      {
        "label": "C",
        "text": "Hypertension",
        "correct": false
      },
      {
        "label": "D",
        "text": "Hypokalemia",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Hypoglycemia is a feature of salt-wasting congenital adrenal hyperplasia (CAH). It is due to 21-hydroxylase deficiency. It results in hyponatremia, hyperkalemia, and hypotension. Males typically present with salt-wasting crises as they often go undiagnosed at birth due to the presence of normal genitalia.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "16_Reproductive Endocrinology",
    "deck_id": 1755954606938,
    "correctAnswer": "A. Hypoglycemia"
  },
  {
    "id": 334,
    "text": "Q4. Which of the following is the drug of choice for the prenatal treatment of congenital adrenal hyperplasia due to 21-hydroxylase deficiency? 209",
    "options": [
      {
        "label": "A",
        "text": "Dexamethasone",
        "correct": true
      },
      {
        "label": "B",
        "text": "Betamethasone",
        "correct": false
      },
      {
        "label": "C",
        "text": "Prednisolone",
        "correct": false
      },
      {
        "label": "D",
        "text": "Hydrocortisone",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">The drug of choice for the prenatal treatment of congenital adrenal hyperplasia (CAH) due to 21-hydroxylase deficiency is dexamethasone, as it readily crosses the placenta. It is an experimental approach aimed at reducing the virilization of 46XX fetuses by suppressing fetal adrenal steroid and androgen secretion. It may be considered when there is a high risk of CAH due to strong family history. It is effective only when started before 4 weeks of gestation. Hydrocortisone is given in the children at divided doses of 1‚Äî1. 5 times the normal cortisol production.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "16_Reproductive Endocrinology",
    "deck_id": 1755954606938,
    "correctAnswer": "A. Dexamethasone"
  },
  {
    "id": 335,
    "text": "Q5. female neonate is noted to have ambiguous genitalia at birth. Further testing reveals elevated 17-(OH)-progesterone levels and a blood glucose of 40 mg/dl. What treatment will you recommend?",
    "options": [
      {
        "label": "A",
        "text": "Betamethasone",
        "correct": false
      },
      {
        "label": "B",
        "text": "Beclomethasone",
        "correct": false
      },
      {
        "label": "C",
        "text": "Dexamethasone",
        "correct": false
      },
      {
        "label": "D",
        "text": "Hydrocortisone",
        "correct": true
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Ambiguous genitalia, elevated 17-(OH)-progesterone, and hypoglycemia are suggestive of 21-hydroxylase deficiency. The drug of choice is hydrocortisone. Hydrocortisone acts as a potent glucocorticoid with mineralocorticoid action and thus increases salt absorption from the kidneys as well. Betamethasone, beclomethasone, and dexamethasone have negligible effects as mineralocorticoids.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "16_Reproductive Endocrinology",
    "deck_id": 1755954606938,
    "correctAnswer": "D. Hydrocortisone"
  },
  {
    "id": 336,
    "text": "Q6. Which of the following is incorrect about galactorrhea?",
    "options": [
      {
        "label": "A",
        "text": "May be bilateral",
        "correct": false
      },
      {
        "label": "B",
        "text": "Associated with lactation",
        "correct": true
      },
      {
        "label": "C",
        "text": "Associated with prolactinoma",
        "correct": false
      },
      {
        "label": "D",
        "text": "Associated with acromegaly",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Galactorrhea or pathological production of milk is not associated with lactation, which is a physiological condition. 214 Galactorrhea is the inappropriate discharge of milk-containing fluid from the breast. It may be unilateral or bilateral. It is associated with acromegaly and hyperprolactinemia. Treatment is with dopamine agonists like bromocriptine or cabergoline if it is due to hyperprolactinemia.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "16_Reproductive Endocrinology",
    "deck_id": 1755954606938,
    "correctAnswer": "B. Associated with lactation"
  },
  {
    "id": 337,
    "text": "Q7. In a patient with gynecomastia, you will order all of the following tests except:",
    "options": [
      {
        "label": "A",
        "text": "Testosterone",
        "correct": false
      },
      {
        "label": "B",
        "text": "Prolactin",
        "correct": true
      },
      {
        "label": "C",
        "text": "Estradiol",
        "correct": false
      },
      {
        "label": "D",
        "text": "Luteinizing hormone",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Determination of prolactin level is not useful in patients with gynecomastia. For the diagnosis of gynecomastia, serum levels of the following hormones must be checked: * Testosterone - LH - FSH * Estradiol *hCG</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "16_Reproductive Endocrinology",
    "deck_id": 1755954606938,
    "correctAnswer": "B. Prolactin"
  },
  {
    "id": 338,
    "text": "Q8. 210",
    "options": [
      {
        "label": "A",
        "text": "32-year-old man is being evaluated for gynecomastia. Laboratory investigations reveal low levels of serum testosterone and luteinizing hormone. What is the likely diagnosis? Testicular failure",
        "correct": false
      },
      {
        "label": "B",
        "text": "Sertoli cell tumor",
        "correct": true
      },
      {
        "label": "C",
        "text": "Gonadotropin-secreting tumor",
        "correct": false
      },
      {
        "label": "D",
        "text": "Androgen-resistant state",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">This clinical scenario of gynecomastia with low LH and testosterone is suggestive of a sertoli cell tumor. Hypogonadotropic hypogonadism is also a possible diagnosis with the above clinical presentation and must be ruled out before diagnosing a Sertoli cell tumor. The differential diagnosis of gynecomastia is as follows: * High LH and low testosterone * Testicular failure * Low LH and low testosterone * Hypogonadotropic hypogonadism * Sertoli cell tumor - increased primary estrogen production * High LH and high testosterone ¬´ Androgen-resistant state * GnRH-secreting tumor</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "16_Reproductive Endocrinology",
    "deck_id": 1755954606938,
    "correctAnswer": "B. Sertoli cell tumor"
  },
  {
    "id": 339,
    "text": "Q9. mother brings her 17-year-old daughter to the gynecologist as she has not started menstruating yet. Examination reveals well-developed breasts and the absence of pubic and axillary hair. Pelvic examination reveals a short, blind-ended vagina. What is the likely diagnosis?",
    "options": [
      {
        "label": "A",
        "text": "Turner‚Äôs syndrome",
        "correct": false
      },
      {
        "label": "B",
        "text": "Stein-Leventhal syndrome",
        "correct": false
      },
      {
        "label": "C",
        "text": "Premature ovarian failure",
        "correct": false
      },
      {
        "label": "D",
        "text": "Complete androgen insensitivity syndrome",
        "correct": true
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">The given clinical scenario is suggestive of complete androgen insensitivity syndrome. Clinical features: 215 * Female phenotype * Normal breast development ¬¢ Blind-ended vagina with absent uterus and ovaries * Presence of testes in the abdomen or inguinal region * Scanty pubic and axillary hair * Primary amenorrhea in late adolescence Option A: In Turner‚Äôs syndrome, breasts are infantile. Option B: Stein Leventhal syndrome or polycystic ovarian disorder presents with hirsutism and anovulatory menstrual cycles. Option C: Premature ovarian failure presents with secondary amenorrhea.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "16_Reproductive Endocrinology",
    "deck_id": 1755954606938,
    "correctAnswer": "D. Complete androgen insensitivity syndrome"
  },
  {
    "id": 340,
    "text": "Q10. baby girl is referred to a pediatric surgeon for suspected bilateral inguinal hernias. Further evaluation reveals the masses to be testes in the inguinal canal. Which karyotype would you expect to find in this child?",
    "options": [
      {
        "label": "A",
        "text": "46 XX",
        "correct": false
      },
      {
        "label": "B",
        "text": "46 XY",
        "correct": true
      },
      {
        "label": "C",
        "text": "47 XXY",
        "correct": false
      },
      {
        "label": "D",
        "text": "47 XYY",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">This clinical picture is suggestive of androgen insensitivity syndrome (AIS). Affected children have a male karyotype or 46 XY with a female phenotype. 46XY individuals with complete AIS (formerly called testicular feminization syndrome) have the following features: * Female phenotype * Normal breast development ¬¢ Blind-ended vagina with absent uterus and ovaries * Scanty pubic and axillary hair Most patients present with * Inguinal masses in infancy - Due to undescended testes or hernias containing testes * Primary amenorrhea in late adolescence Gonadectomy is a recommended course of treatment due to the possible risks of malignancy.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "16_Reproductive Endocrinology",
    "deck_id": 1755954606938,
    "correctAnswer": "B. 46 XY"
  },
  {
    "id": 341,
    "text": "Q11. An 18-year-old boy is brought to the casualty with minor burns following a house fire. He tells you that he did not even smell the smoke. Further probing reveals a history of bilateral orchidopexy at the age of 7. Examination findings include eunuchoid habitus, prepubertal testes, and microphallus. What is the likely diagnosis?",
    "options": [
      {
        "label": "A",
        "text": "Primary hypogonadism 211",
        "correct": false
      },
      {
        "label": "B",
        "text": "Klinefelter syndrome",
        "correct": false
      },
      {
        "label": "C",
        "text": "Kallman syndrome",
        "correct": true
      },
      {
        "label": "D",
        "text": "Hyperprolactinemia",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Anosmia and absent secondary sexual characteristics in this patient are suggestive of Kallman syndrome. It is an X-linked disorder that causes isolated hypogonadotrophic hypogonadism due to defective development of the olfactory bulb. This results in: * Defective migration of GnRH-producing neurons that originate from the olfactory epithelium ¬¢ Aplasia or hypoplasia of olfactory bulb The clinical features include: 216 * Cryptorchidism * Absent or delayed pubertal changes due to GnRH deficiency ¬¢ Anosmia or hyposmia Options A and B: Klinefelter syndrome is a cause of primary or hypergonadotrophic hypogonadism. Option D: Hyperprolactinemia can cause hypogonadotrophic hypogonadism, but is also associated with gynecomastia, galactorrhea, and bitemporal hemianopia.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "16_Reproductive Endocrinology",
    "deck_id": 1755954606938,
    "correctAnswer": "C. Kallman syndrome"
  },
  {
    "id": 342,
    "text": "Q12. What is the most common cause of hypergonadotropic hypogonadism in males?",
    "options": [
      {
        "label": "A",
        "text": "Viral orchitis",
        "correct": false
      },
      {
        "label": "B",
        "text": "Klinefelter‚Äôs syndrome",
        "correct": true
      },
      {
        "label": "C",
        "text": "Kallman syndrome",
        "correct": false
      },
      {
        "label": "D",
        "text": "Noonan syndrome",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">The most common cause of hypergonadotrophic hypogonadism in males is Klinefelter‚Äôs syndrome It occurs in males with a 47 XXY karyotype and is associated with testicular dysfunction and male infertility. Causes of hypergonadotrophic hypogonadism in males and females: * Congenital * Klinefelter's syndrome * Turner's syndrome * Swyer's syndrome ¬¢ Premature ovarian failure associated with fragile X syndrome and galactosemia * Acquired * Mumps orchitis * Testicular torsion, trauma * Liver cirrhosis * Ketoconazole ¬¢ Premature ovarian failure</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "16_Reproductive Endocrinology",
    "deck_id": 1755954606938,
    "correctAnswer": "B. Klinefelter‚Äôs syndrome"
  },
  {
    "id": 343,
    "text": "Q13. Which of the following will you recommend in all patients with androgen insensitivity syndrome?",
    "options": [
      {
        "label": "A",
        "text": "Gonadectomy",
        "correct": true
      },
      {
        "label": "B",
        "text": "Testosterone replacement",
        "correct": false
      },
      {
        "label": "C",
        "text": "Vaginoplasty",
        "correct": false
      },
      {
        "label": "D",
        "text": "Estrogen replacement",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">Gonadectomy is clinically recommended in all patients with androgen insensitivity syndrome (AIS) or testicular feminization syndrome due to the risk of malignancy arising from the abnormally located testes. Options B, C, D: These treatment options may be offered to patients with AIS, but it depends on personal preference and whether they identify as males or females.</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "16_Reproductive Endocrinology",
    "deck_id": 1755954606938,
    "correctAnswer": "A. Gonadectomy"
  },
  {
    "id": 344,
    "text": "Q14. 19-year-old patient is being evaluated for primary amenorrhea. Laboratory investigations reveal decreased estrogen, FSH, and LH. What is the likely diagnosis?",
    "options": [
      {
        "label": "A",
        "text": "Asherman syndrome",
        "correct": false
      },
      {
        "label": "B",
        "text": "Millerian agenesis",
        "correct": false
      },
      {
        "label": "C",
        "text": "Kallman syndrome",
        "correct": true
      },
      {
        "label": "D",
        "text": "Turner&apos;s syndrome Answer Key 212",
        "correct": false
      }
    ],
    "imageData": null,
    "explanationHTML": "<div class=\"explanation\">217 Decreased levels of estrogen, FSH, and LH are suggestive of hypogonadotrophic hypogonadism, which is caused by Kallman syndrome. It is an X-linked disorder (KAL gene) that causes isolated hypogonadotrophic hypogonadism and anosmia. Causes of hypogonadotrophic hypogonadism: * Congenital * Kallman's syndrome * Isolated hypogonadotrophic hypogonadism (IHH) * Prader-Willi syndrome * CHARGE syndrome * Acquired * Pituitary tumors, apoplexy ¬¢ Hyperprolactinemia ¬¢ Anorexia nervosa, excess exercise * Irradiation * Infection * Trauma Option A: Asherman syndrome causes secondary amenorrhea due to intrauterine synechiae. Option B: Millerian agenesis presents with primary amenorrhea with normal levels of all hormones. Option D: Turner's syndrome causes primary amenorrhea due to hypergonadotrophic hypogonadism. 218</div><div class=\"telegram-link\"><small><a href=\"http://t.me/Friendly_neighborhood_medico_bot\"> </a></small></div>",
    "subdeck": "16_Reproductive Endocrinology",
    "deck_id": 1755954606938,
    "correctAnswer": "C. Kallman syndrome"
  }
];
        let currentQuestion = 0;
        let answers = [];
        let correctCount = 0;
        let incorrectCount = 0;
        let answeredQuestions = new Set();
        let isTestMode = localStorage.getItem('testMode') === 'true' || false;

        console.log('Quiz loaded with', questions.length, 'questions');
        console.log('Test mode:', isTestMode);

        // Hide stats bar if test mode is enabled
        if (isTestMode) {
            document.addEventListener('DOMContentLoaded', () => {
                document.getElementById('stats-bar').style.display = 'none';
            });
        }

        // Auto-start quiz
        startQuiz();

        function startQuiz() {
            answers = new Array(questions.length).fill(null);
            correctCount = 0;
            incorrectCount = 0;
            answeredQuestions = new Set();
            currentQuestion = 0;
            showQuestion(0);
            updateStats();
        }

        function showQuestion(index) {
            currentQuestion = index;
            const question = questions[index];

            document.getElementById('question-number').textContent = `Question ${index + 1} of ${questions.length}`;
            document.getElementById('question-text').innerHTML = question.text;
            document.getElementById('question-status').textContent = answers[index] ? 'Question answered' : 'Click an option to answer';

            const imagesContainer = document.getElementById('question-images');
            imagesContainer.innerHTML = '';

            if (question.imageData) {
                const img = document.createElement('img');
                img.src = `data:${question.imageData.mime};base64,${question.imageData.data}`;
                img.className = 'medical-image';
                img.alt = 'Medical Question Image';
                imagesContainer.appendChild(img);
            }

            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';

            question.options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'option-card w-full p-6 text-left bg-white rounded-xl shadow-lg';
                button.innerHTML = `<span class="font-bold text-blue-600 mr-4">${option.label}.</span>${option.text}`;

                if (!isTestMode && answers[index] !== null) {
                    button.disabled = true;
                    if (option.correct) {
                        button.classList.add('correct');
                    } else if (answers[index] === option.label) {
                        button.classList.add('incorrect');
                    }
                } else {
                    button.onclick = () => selectAnswer(option.label);
                }

                if (answers[index] === option.label) {
                    button.classList.add('selected');
                }

                optionsContainer.appendChild(button);
            });

            // Show feedback only in normal mode and if answered
            if (!isTestMode && answers[index] !== null) {
                showFeedback(index);
            } else {
                document.getElementById('feedback-section').classList.add('hidden');
            }

            document.getElementById('prev-btn').disabled = index === 0;

            if (answers[index] !== null) {
                if (index === questions.length - 1) {
                    document.getElementById('next-btn').classList.add('hidden');
                    document.getElementById('finish-btn').classList.remove('hidden');
                } else {
                    document.getElementById('next-btn').classList.remove('hidden');
                    document.getElementById('finish-btn').classList.add('hidden');
                }
            } else {
                document.getElementById('next-btn').classList.add('hidden');
                document.getElementById('finish-btn').classList.add('hidden');
            }

            const progress = ((index + 1) / questions.length) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
        }

        function selectAnswer(label) {
            const question = questions[currentQuestion];
            const correctOption = question.options.find(opt => opt.correct);
            const isCorrect = correctOption && label === correctOption.label;

            if (!answeredQuestions.has(currentQuestion)) {
                answeredQuestions.add(currentQuestion);
                if (isCorrect) {
                    correctCount++;
                } else {
                    incorrectCount++;
                }
            }

            answers[currentQuestion] = label;
            updateStats();
            
            showQuestion(currentQuestion);
        }

        function showFeedback(questionIndex) {
            const question = questions[questionIndex];
            const userAnswer = answers[questionIndex];
            const correctOption = question.options.find(opt => opt.correct);
            const userOption = question.options.find(opt => opt.label === userAnswer);
            const isCorrect = correctOption && userAnswer === correctOption.label;

            const feedbackSection = document.getElementById('feedback-section');
            const feedbackIcon = document.getElementById('feedback-icon');
            const feedbackMessage = document.getElementById('feedback-message');

            if (isCorrect) {
                feedbackSection.className = 'bg-green-50 border border-green-200 mb-8 p-6 rounded-2xl';
                feedbackIcon.textContent = '‚úÖ';
                feedbackMessage.textContent = 'Correct!';
                feedbackMessage.className = 'text-2xl font-bold mb-2 text-green-700';
            } else {
                feedbackSection.className = 'bg-red-50 border border-red-200 mb-8 p-6 rounded-2xl';
                feedbackIcon.textContent = '‚ùå';
                feedbackMessage.textContent = 'Incorrect';
                feedbackMessage.className = 'text-2xl font-bold mb-2 text-red-700';
            }

            document.getElementById('user-answer-display').innerHTML = `<span class="${isCorrect ? 'text-green-600' : 'text-red-600'}">${userAnswer}. ${userOption?.text || 'Unknown'}</span>`;
            document.getElementById('correct-answer-display').textContent = question.correctAnswer;

            const explanationSection = document.getElementById('explanation-section');
            if (question.explanationHTML && question.explanationHTML.trim()) {
                document.getElementById('explanation-content').innerHTML = question.explanationHTML;
                explanationSection.classList.remove('hidden');
            } else {
                explanationSection.classList.add('hidden');
            }

            feedbackSection.classList.remove('hidden');
        }

        function updateStats() {
            const totalAnswered = correctCount + incorrectCount;
            const accuracy = totalAnswered === 0 ? 0 : Math.round((correctCount / totalAnswered) * 100);

            document.getElementById('correct-stats').textContent = correctCount;
            document.getElementById('incorrect-stats').textContent = incorrectCount;
            document.getElementById('accuracy-stats').textContent = `${accuracy}%`;
            document.getElementById('progress-stats').textContent = `${totalAnswered}/${questions.length}`;
        }

        document.getElementById('prev-btn').onclick = () => {
            if (currentQuestion > 0) {
                showQuestion(currentQuestion - 1);
            }
        };
        
        document.getElementById('next-btn').onclick = () => {
            if (currentQuestion < questions.length - 1) {
                showQuestion(currentQuestion + 1);
            }
        };
        
        document.getElementById('finish-btn').onclick = showFinalResults;

        function showFinalResults() {
            if (isTestMode) {
                showTestModeResults();
            } else {
                showNormalModeResults();
            }
        }

        function showTestModeResults() {
            const accuracy = (correctCount + incorrectCount === 0) ? 0 : Math.round((correctCount / (correctCount + incorrectCount)) * 100);

            document.getElementById('quiz-section').classList.add('hidden');
            document.getElementById('test-results').classList.remove('hidden');

            document.getElementById('test-final-correct').textContent = correctCount;
            document.getElementById('test-final-incorrect').textContent = incorrectCount;
            document.getElementById('test-final-accuracy').textContent = `${accuracy}%`;

            let gradeIcon = 'üéØ';
            if (accuracy >= 90) {
                gradeIcon = 'üèÜ';
            } else if (accuracy >= 80) {
                gradeIcon = 'üéâ';
            } else if (accuracy >= 70) {
                gradeIcon = 'üëç';
            } else if (accuracy >= 60) {
                gradeIcon = 'üìö';
            } else {
                gradeIcon = 'üí™';
            }

            document.getElementById('test-grade-icon').textContent = gradeIcon;

            // Show detailed review
            const reviewContainer = document.getElementById('test-review-details');
            reviewContainer.innerHTML = '';

            questions.forEach((question, index) => {
                const userAnswer = answers[index];
                const correctOption = question.options.find(opt => opt.correct);
                const userOption = question.options.find(opt => opt.label === userAnswer);
                const isCorrect = correctOption && userAnswer === correctOption.label;

                const reviewCard = document.createElement('div');
                reviewCard.className = `border-l-4 p-4 bg-white rounded-lg shadow-sm ${isCorrect ? 'border-green-500' : 'border-red-500'}`;
                
                reviewCard.innerHTML = `
                    <div class="flex items-center justify-between mb-2">
                        <h4 class="font-bold text-gray-800">Question ${index + 1}</h4>
                        <span class="text-2xl">${isCorrect ? '‚úÖ' : '‚ùå'}</span>
                    </div>
                    <p class="text-gray-700 mb-3">${question.text}</p>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <strong class="text-gray-600">Your Answer:</strong><br>
                            <span class="${isCorrect ? 'text-green-600' : 'text-red-600'}">${userAnswer}. ${userOption?.text || 'Not answered'}</span>
                        </div>
                        <div>
                            <strong class="text-gray-600">Correct Answer:</strong><br>
                            <span class="text-green-600">${question.correctAnswer}</span>
                        </div>
                    </div>
                    ${question.explanationHTML ? `
                        <div class="mt-3 p-3 bg-blue-50 rounded-lg">
                            <strong class="text-blue-800">Explanation:</strong>
                            <div class="mt-2 explanation-content">${question.explanationHTML}</div>
                        </div>
                    ` : ''}
                `;
                
                reviewContainer.appendChild(reviewCard);
            });
        }

        function showNormalModeResults() {
            const accuracy = (correctCount + incorrectCount === 0) ? 0 : Math.round((correctCount / (correctCount + incorrectCount)) * 100);

            document.getElementById('quiz-section').classList.add('hidden');
            document.getElementById('final-results').classList.remove('hidden');

            document.getElementById('final-correct').textContent = correctCount;
            document.getElementById('final-incorrect').textContent = incorrectCount;
            document.getElementById('final-accuracy').textContent = `${accuracy}%`;

            let gradeIcon = 'üéØ';
            if (accuracy >= 90) {
                gradeIcon = 'üèÜ';
            } else if (accuracy >= 80) {
                gradeIcon = 'üéâ';
            } else if (accuracy >= 70) {
                gradeIcon = 'üëç';
            } else if (accuracy >= 60) {
                gradeIcon = 'üìö';
            } else {
                gradeIcon = 'üí™';
            }

            document.getElementById('final-grade-icon').textContent = gradeIcon;
        }
    </script>
</body>
</html>